import{m as ln,l as Fr,k as jr,n as ts,o as ns,p as os,q as ie,t as rs,u as de,v as Qt,g as Zr,r as mt,w as is,j as Z,T as ss,e as as,x as ls}from"./index-D0CuwQdU.js";class Ne{constructor(t,n){this.width=n,this.height=t.length/n,this.data=t}static createEmpty(t,n){return new Ne(new Uint8ClampedArray(t*n),t)}get(t,n){return t<0||t>=this.width||n<0||n>=this.height?!1:!!this.data[n*this.width+t]}set(t,n,o){this.data[n*this.width+t]=o?1:0}setRegion(t,n,o,r,i){for(let s=n;s<n+r;s++)for(let a=t;a<t+o;a++)this.set(a,s,!!i)}}const ce=8,cs=24;function Oo(e,t,n){return e<t?t:e>n?n:e}class Io{constructor(t,n,o){this.width=t;const r=t*n;if(o&&o.length!==r)throw new Error("Wrong buffer size");this.data=o||new Uint8ClampedArray(r)}get(t,n){return this.data[n*this.width+t]}set(t,n,o){this.data[n*this.width+t]=o}}function fs(e,t,n,o,r,i){const s=t*n;if(e.length!==s*4)throw new Error("Malformed data passed to binarizer.");let a=0,l;i&&(l=new Uint8ClampedArray(e.buffer,a,s),a+=s);const c=new Io(t,n,l);if(r.useIntegerApproximation)for(let B=0;B<n;B++)for(let C=0;C<t;C++){const N=(B*t+C)*4,g=e[N],p=e[N+1],T=e[N+2];c.set(C,B,r.red*g+r.green*p+r.blue*T+128>>8)}else for(let B=0;B<n;B++)for(let C=0;C<t;C++){const N=(B*t+C)*4,g=e[N],p=e[N+1],T=e[N+2];c.set(C,B,r.red*g+r.green*p+r.blue*T)}const f=Math.ceil(t/ce),d=Math.ceil(n/ce),u=f*d;let h;i&&(h=new Uint8ClampedArray(e.buffer,a,u),a+=u);const m=new Io(f,d,h);for(let B=0;B<d;B++)for(let C=0;C<f;C++){let N=1/0,g=0;for(let E=0;E<ce;E++)for(let O=0;O<ce;O++){const x=c.get(C*ce+O,B*ce+E);N=Math.min(N,x),g=Math.max(g,x)}let p=(N+g)/2;if(p=Math.min(255,p*1.11),g-N<=cs&&(p=N/2,B>0&&C>0)){const E=(m.get(C,B-1)+2*m.get(C-1,B)+m.get(C-1,B-1))/4;N<E&&(p=E)}m.set(C,B,p)}let S;if(i){const B=new Uint8ClampedArray(e.buffer,a,s);a+=s,S=new Ne(B,t)}else S=Ne.createEmpty(t,n);let P=null;if(o)if(i){const B=new Uint8ClampedArray(e.buffer,a,s);P=new Ne(B,t)}else P=Ne.createEmpty(t,n);for(let B=0;B<d;B++)for(let C=0;C<f;C++){const N=Oo(C,2,f-3),g=Oo(B,2,d-3);let p=0;for(let E=-2;E<=2;E++)for(let O=-2;O<=2;O++)p+=m.get(N+E,g+O);const T=p/25;for(let E=0;E<ce;E++)for(let O=0;O<ce;O++){const x=C*ce+E,b=B*ce+O,y=c.get(x,b);S.set(x,b,y<=T),o&&P.set(x,b,!(y<=T))}}return o?{binarized:S,inverted:P}:{binarized:S}}class ds{constructor(t){this.byteOffset=0,this.bitOffset=0,this.bytes=t}readBits(t){if(t<1||t>32||t>this.available())throw new Error("Cannot read "+t.toString()+" bits");let n=0;if(this.bitOffset>0){const o=8-this.bitOffset,r=t<o?t:o,i=o-r,s=255>>8-r<<i;n=(this.bytes[this.byteOffset]&s)>>i,t-=r,this.bitOffset+=r,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(t>0){for(;t>=8;)n=n<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,t-=8;if(t>0){const o=8-t,r=255>>o<<o;n=n<<t|(this.bytes[this.byteOffset]&r)>>o,this.bitOffset+=t}}return n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var re;(function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci",e.StructuredAppend="structuredappend"})(re||(re={}));var ke;(function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI",e[e.StructuredAppend=3]="StructuredAppend"})(ke||(ke={}));function us(e,t){const n=[];let o="";const r=[10,12,14][t];let i=e.readBits(r);for(;i>=3;){const s=e.readBits(10);if(s>=1e3)throw new Error("Invalid numeric value above 999");const a=Math.floor(s/100),l=Math.floor(s/10)%10,c=s%10;n.push(48+a,48+l,48+c),o+=a.toString()+l.toString()+c.toString(),i-=3}if(i===2){const s=e.readBits(7);if(s>=100)throw new Error("Invalid numeric value above 99");const a=Math.floor(s/10),l=s%10;n.push(48+a,48+l),o+=a.toString()+l.toString()}else if(i===1){const s=e.readBits(4);if(s>=10)throw new Error("Invalid numeric value above 9");n.push(48+s),o+=s.toString()}return{bytes:n,text:o}}const Xe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function hs(e,t){const n=[];let o="";const r=[9,11,13][t];let i=e.readBits(r);for(;i>=2;){const s=e.readBits(11),a=Math.floor(s/45),l=s%45;n.push(Xe[a].charCodeAt(0),Xe[l].charCodeAt(0)),o+=Xe[a]+Xe[l],i-=2}if(i===1){const s=e.readBits(6);n.push(Xe[s].charCodeAt(0)),o+=Xe[s]}return{bytes:n,text:o}}function ws(e,t){const n=[];let o="";const r=[8,16,16][t],i=e.readBits(r);for(let s=0;s<i;s++){const a=e.readBits(8);n.push(a)}try{o+=decodeURIComponent(n.map(s=>`%${("0"+s.toString(16)).substr(-2)}`).join(""))}catch{}return{bytes:n,text:o}}function gs(e,t){const n=[],o=[8,10,12][t],r=e.readBits(o);for(let s=0;s<r;s++){const a=e.readBits(13);let l=Math.floor(a/192)<<8|a%192;l<7936?l+=33088:l+=49472,n.push(l>>8,l&255)}const i=new TextDecoder("shift-jis").decode(Uint8Array.from(n));return{bytes:n,text:i}}function ms(e,t){const n=new ds(e),o=t<=9?0:t<=26?1:2,r={text:"",bytes:[],chunks:[],version:t};for(;n.available()>=4;){const i=n.readBits(4);if(i===ke.Terminator)return r;if(i===ke.ECI)n.readBits(1)===0?r.chunks.push({type:re.ECI,assignmentNumber:n.readBits(7)}):n.readBits(1)===0?r.chunks.push({type:re.ECI,assignmentNumber:n.readBits(14)}):n.readBits(1)===0?r.chunks.push({type:re.ECI,assignmentNumber:n.readBits(21)}):r.chunks.push({type:re.ECI,assignmentNumber:-1});else if(i===ke.Numeric){const s=us(n,o);r.text+=s.text,r.bytes.push(...s.bytes),r.chunks.push({type:re.Numeric,text:s.text})}else if(i===ke.Alphanumeric){const s=hs(n,o);r.text+=s.text,r.bytes.push(...s.bytes),r.chunks.push({type:re.Alphanumeric,text:s.text})}else if(i===ke.Byte){const s=ws(n,o);r.text+=s.text,r.bytes.push(...s.bytes),r.chunks.push({type:re.Byte,bytes:s.bytes,text:s.text})}else if(i===ke.Kanji){const s=gs(n,o);r.text+=s.text,r.bytes.push(...s.bytes),r.chunks.push({type:re.Kanji,bytes:s.bytes,text:s.text})}else i===ke.StructuredAppend&&r.chunks.push({type:re.StructuredAppend,currentSequence:n.readBits(4),totalSequence:n.readBits(4),parity:n.readBits(8)})}if(n.available()===0||n.readBits(n.available())===0)return r}class he{constructor(t,n){if(n.length===0)throw new Error("No coefficients.");this.field=t;const o=n.length;if(o>1&&n[0]===0){let r=1;for(;r<o&&n[r]===0;)r++;if(r===o)this.coefficients=t.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(o-r);for(let i=0;i<this.coefficients.length;i++)this.coefficients[i]=n[r+i]}}else this.coefficients=n}degree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}addOrSubtract(t){if(this.isZero())return t;if(t.isZero())return this;let n=this.coefficients,o=t.coefficients;n.length>o.length&&([n,o]=[o,n]);const r=new Uint8ClampedArray(o.length),i=o.length-n.length;for(let s=0;s<i;s++)r[s]=o[s];for(let s=i;s<o.length;s++)r[s]=qe(n[s-i],o[s]);return new he(this.field,r)}multiply(t){if(t===0)return this.field.zero;if(t===1)return this;const n=this.coefficients.length,o=new Uint8ClampedArray(n);for(let r=0;r<n;r++)o[r]=this.field.multiply(this.coefficients[r],t);return new he(this.field,o)}multiplyPoly(t){if(this.isZero()||t.isZero())return this.field.zero;const n=this.coefficients,o=n.length,r=t.coefficients,i=r.length,s=new Uint8ClampedArray(o+i-1);for(let a=0;a<o;a++){const l=n[a];for(let c=0;c<i;c++)s[a+c]=qe(s[a+c],this.field.multiply(l,r[c]))}return new he(this.field,s)}multiplyByMonomial(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(n===0)return this.field.zero;const o=this.coefficients.length,r=new Uint8ClampedArray(o+t);for(let i=0;i<o;i++)r[i]=this.field.multiply(this.coefficients[i],n);return new he(this.field,r)}evaluateAt(t){let n=0;if(t===0)return this.getCoefficient(0);const o=this.coefficients.length;if(t===1)return this.coefficients.forEach(r=>{n=qe(n,r)}),n;n=this.coefficients[0];for(let r=1;r<o;r++)n=qe(this.field.multiply(t,n),this.coefficients[r]);return n}}function qe(e,t){return e^t}class Bs{constructor(t,n,o){this.primitive=t,this.size=n,this.generatorBase=o,this.expTable=new Array(this.size),this.logTable=new Array(this.size);let r=1;for(let i=0;i<this.size;i++)this.expTable[i]=r,r=r*2,r>=this.size&&(r=(r^this.primitive)&this.size-1);for(let i=0;i<this.size-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new he(this,Uint8ClampedArray.from([0])),this.one=new he(this,Uint8ClampedArray.from([1]))}multiply(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]}inverse(t){if(t===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[t]-1]}buildMonomial(t,n){if(t<0)throw new Error("Invalid monomial degree less than 0");if(n===0)return this.zero;const o=new Uint8ClampedArray(t+1);return o[0]=n,new he(this,o)}log(t){if(t===0)throw new Error("Can't take log(0)");return this.logTable[t]}exp(t){return this.expTable[t]}}function ks(e,t,n,o){t.degree()<n.degree()&&([t,n]=[n,t]);let r=t,i=n,s=e.zero,a=e.one;for(;i.degree()>=o/2;){const f=r,d=s;if(r=i,s=a,r.isZero())return null;i=f;let u=e.zero;const h=r.getCoefficient(r.degree()),m=e.inverse(h);for(;i.degree()>=r.degree()&&!i.isZero();){const S=i.degree()-r.degree(),P=e.multiply(i.getCoefficient(i.degree()),m);u=u.addOrSubtract(e.buildMonomial(S,P)),i=i.addOrSubtract(r.multiplyByMonomial(S,P))}if(a=u.multiplyPoly(s).addOrSubtract(d),i.degree()>=r.degree())return null}const l=a.getCoefficient(0);if(l===0)return null;const c=e.inverse(l);return[a.multiply(c),i.multiply(c)]}function _s(e,t){const n=t.degree();if(n===1)return[t.getCoefficient(1)];const o=new Array(n);let r=0;for(let i=1;i<e.size&&r<n;i++)t.evaluateAt(i)===0&&(o[r]=e.inverse(i),r++);return r!==n?null:o}function bs(e,t,n){const o=n.length,r=new Array(o);for(let i=0;i<o;i++){const s=e.inverse(n[i]);let a=1;for(let l=0;l<o;l++)i!==l&&(a=e.multiply(a,qe(1,e.multiply(n[l],s))));r[i]=e.multiply(t.evaluateAt(s),e.inverse(a)),e.generatorBase!==0&&(r[i]=e.multiply(r[i],s))}return r}function ys(e,t){const n=new Uint8ClampedArray(e.length);n.set(e);const o=new Bs(285,256,0),r=new he(o,n),i=new Uint8ClampedArray(t);let s=!1;for(let d=0;d<t;d++){const u=r.evaluateAt(o.exp(d+o.generatorBase));i[i.length-1-d]=u,u!==0&&(s=!0)}if(!s)return n;const a=new he(o,i),l=ks(o,o.buildMonomial(t,1),a,t);if(l===null)return null;const c=_s(o,l[0]);if(c==null)return null;const f=bs(o,l[1],c);for(let d=0;d<c.length;d++){const u=n.length-1-o.log(c[d]);if(u<0)return null;n[u]=qe(n[u],f[d])}return n}const Ao=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}];function en(e,t){let n=e^t,o=0;for(;n;)o++,n&=n-1;return o}function De(e,t){return t<<1|e}const ps=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],Cs=[e=>(e.y+e.x)%2===0,e=>e.y%2===0,e=>e.x%3===0,e=>(e.y+e.x)%3===0,e=>(Math.floor(e.y/2)+Math.floor(e.x/3))%2===0,e=>e.x*e.y%2+e.x*e.y%3===0,e=>(e.y*e.x%2+e.y*e.x%3)%2===0,e=>((e.y+e.x)%2+e.y*e.x%3)%2===0];function xs(e){const t=17+4*e.versionNumber,n=Ne.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(const o of e.alignmentPatternCenters)for(const r of e.alignmentPatternCenters)o===6&&r===6||o===6&&r===t-7||o===t-7&&r===6||n.setRegion(o-2,r-2,5,5,!0);return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}function Ss(e,t,n){const o=Cs[n.dataMask],r=e.height,i=xs(t),s=[];let a=0,l=0,c=!0;for(let f=r-1;f>0;f-=2){f===6&&f--;for(let d=0;d<r;d++){const u=c?r-1-d:d;for(let h=0;h<2;h++){const m=f-h;if(!i.get(m,u)){l++;let S=e.get(m,u);o({y:u,x:m})&&(S=!S),a=De(S,a),l===8&&(s.push(a),l=0,a=0)}}}c=!c}return s}function Es(e){const t=e.height,n=Math.floor((t-17)/4);if(n<=6)return Ao[n-1];let o=0;for(let a=5;a>=0;a--)for(let l=t-9;l>=t-11;l--)o=De(e.get(l,a),o);let r=0;for(let a=5;a>=0;a--)for(let l=t-9;l>=t-11;l--)r=De(e.get(a,l),r);let i=1/0,s;for(const a of Ao){if(a.infoBits===o||a.infoBits===r)return a;let l=en(o,a.infoBits);l<i&&(s=a,i=l),l=en(r,a.infoBits),l<i&&(s=a,i=l)}if(i<=3)return s}function Ps(e){let t=0;for(let s=0;s<=8;s++)s!==6&&(t=De(e.get(s,8),t));for(let s=7;s>=0;s--)s!==6&&(t=De(e.get(8,s),t));const n=e.height;let o=0;for(let s=n-1;s>=n-7;s--)o=De(e.get(8,s),o);for(let s=n-8;s<n;s++)o=De(e.get(s,8),o);let r=1/0,i=null;for(const{bits:s,formatInfo:a}of ps){if(s===t||s===o)return a;let l=en(t,s);l<r&&(i=a,r=l),t!==o&&(l=en(o,s),l<r&&(i=a,r=l))}return r<=3?i:null}function Ns(e,t,n){const o=t.errorCorrectionLevels[n],r=[];let i=0;if(o.ecBlocks.forEach(a=>{for(let l=0;l<a.numBlocks;l++)r.push({numDataCodewords:a.dataCodewordsPerBlock,codewords:[]}),i+=a.dataCodewordsPerBlock+o.ecCodewordsPerBlock}),e.length<i)return null;e=e.slice(0,i);const s=o.ecBlocks[0].dataCodewordsPerBlock;for(let a=0;a<s;a++)for(const l of r)l.codewords.push(e.shift());if(o.ecBlocks.length>1){const a=o.ecBlocks[0].numBlocks,l=o.ecBlocks[1].numBlocks;for(let c=0;c<l;c++)r[a+c].codewords.push(e.shift())}for(;e.length>0;)for(const a of r)a.codewords.push(e.shift());return r}function vo(e){const t=Es(e);if(!t)return null;const n=Ps(e);if(!n)return null;const o=Ss(e,t,n),r=Ns(o,t,n.errorCorrectionLevel);if(!r)return null;const i=r.reduce((l,c)=>l+c.numDataCodewords,0),s=new Uint8ClampedArray(i);let a=0;for(const l of r){const c=ys(l.codewords,l.codewords.length-l.numDataCodewords);if(!c)return null;for(let f=0;f<l.numDataCodewords;f++)s[a++]=c[f]}try{return ms(s,t.versionNumber)}catch{return null}}function Ts(e){if(e==null)return null;const t=vo(e);if(t)return t;for(let n=0;n<e.width;n++)for(let o=n+1;o<e.height;o++)e.get(n,o)!==e.get(o,n)&&(e.set(n,o,!e.get(n,o)),e.set(o,n,!e.get(o,n)));return vo(e)}function Hr(e,t,n,o){const r=e.x-t.x+n.x-o.x,i=e.y-t.y+n.y-o.y;if(r===0&&i===0)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};{const s=t.x-n.x,a=o.x-n.x,l=t.y-n.y,c=o.y-n.y,f=s*c-a*l,d=(r*c-a*i)/f,u=(s*i-r*l)/f;return{a11:t.x-e.x+d*t.x,a12:t.y-e.y+d*t.y,a13:d,a21:o.x-e.x+u*o.x,a22:o.y-e.y+u*o.y,a23:u,a31:e.x,a32:e.y,a33:1}}}function Os(e,t,n,o){const r=Hr(e,t,n,o);return{a11:r.a22*r.a33-r.a23*r.a32,a12:r.a13*r.a32-r.a12*r.a33,a13:r.a12*r.a23-r.a13*r.a22,a21:r.a23*r.a31-r.a21*r.a33,a22:r.a11*r.a33-r.a13*r.a31,a23:r.a13*r.a21-r.a11*r.a23,a31:r.a21*r.a32-r.a22*r.a31,a32:r.a12*r.a31-r.a11*r.a32,a33:r.a11*r.a22-r.a12*r.a21}}function Is(e,t){return{a11:e.a11*t.a11+e.a21*t.a12+e.a31*t.a13,a12:e.a12*t.a11+e.a22*t.a12+e.a32*t.a13,a13:e.a13*t.a11+e.a23*t.a12+e.a33*t.a13,a21:e.a11*t.a21+e.a21*t.a22+e.a31*t.a23,a22:e.a12*t.a21+e.a22*t.a22+e.a32*t.a23,a23:e.a13*t.a21+e.a23*t.a22+e.a33*t.a23,a31:e.a11*t.a31+e.a21*t.a32+e.a31*t.a33,a32:e.a12*t.a31+e.a22*t.a32+e.a32*t.a33,a33:e.a13*t.a31+e.a23*t.a32+e.a33*t.a33}}function As(e,t){const n=Os({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),o=Hr(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),r=Is(o,n),i=Ne.createEmpty(t.dimension,t.dimension),s=(a,l)=>{const c=r.a13*a+r.a23*l+r.a33;return{x:(r.a11*a+r.a21*l+r.a31)/c,y:(r.a12*a+r.a22*l+r.a32)/c}};for(let a=0;a<t.dimension;a++)for(let l=0;l<t.dimension;l++){const c=l+.5,f=a+.5,d=s(c,f);i.set(l,a,e.get(Math.floor(d.x),Math.floor(d.y)))}return{matrix:i,mappingFunction:s}}const vs=5,Ro=.5,zo=1.5,Se=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xe(e){return e.reduce((t,n)=>t+n)}function Rs(e,t,n){const o=Se(e,t),r=Se(t,n),i=Se(e,n);let s,a,l;return r>=o&&r>=i?[s,a,l]=[t,e,n]:i>=r&&i>=o?[s,a,l]=[e,t,n]:[s,a,l]=[e,n,t],(l.x-a.x)*(s.y-a.y)-(l.y-a.y)*(s.x-a.x)<0&&([s,l]=[l,s]),{bottomLeft:s,topLeft:a,topRight:l}}function zs(e,t,n,o){const r=(xe(Te(e,n,o,5))/7+xe(Te(e,t,o,5))/7+xe(Te(n,e,o,5))/7+xe(Te(t,e,o,5))/7)/4;if(r<1)throw new Error("Invalid module size");const i=Math.round(Se(e,t)/r),s=Math.round(Se(e,n)/r);let a=Math.floor((i+s)/2)+7;switch(a%4){case 0:a++;break;case 2:a--;break}return{dimension:a,moduleSize:r}}function Lo(e,t,n,o){const r=[{x:Math.floor(e.x),y:Math.floor(e.y)}],i=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);let s,a,l,c;i?(s=Math.floor(e.y),a=Math.floor(e.x),l=Math.floor(t.y),c=Math.floor(t.x)):(s=Math.floor(e.x),a=Math.floor(e.y),l=Math.floor(t.x),c=Math.floor(t.y));const f=Math.abs(l-s),d=Math.abs(c-a);let u=Math.floor(-f/2);const h=s<l?1:-1,m=a<c?1:-1;let S=!0;for(let B=s,C=a;B!==l+h;B+=h){const N=i?C:B,g=i?B:C;if(n.get(N,g)!==S&&(S=!S,r.push({x:N,y:g}),r.length===o+1))break;if(u+=d,u>0){if(C===c)break;C+=m,u-=f}}const P=[];for(let B=0;B<o;B++)r[B]&&r[B+1]?P.push(Se(r[B],r[B+1])):P.push(0);return P}function Te(e,t,n,o){const r=t.y-e.y,i=t.x-e.x,s=Lo(e,t,n,Math.ceil(o/2)),a=Lo(e,{x:e.x-i,y:e.y-r},n,Math.ceil(o/2)),l=s.shift()+a.shift()-1;return a.concat(l).concat(...s)}function Ht(e,t){const n=xe(e)/xe(t);let o=0;return t.forEach((r,i)=>{o+=Math.pow(e[i]-r*n,2)}),{averageSize:n,error:o}}function Vr(e,t,n){try{const o=Te(e,{x:-1,y:e.y},n,t.length),r=Te(e,{x:e.x,y:-1},n,t.length),i={x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},s=Te(e,i,n,t.length),a={x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},l=Te(e,a,n,t.length),c=Ht(o,t),f=Ht(r,t),d=Ht(s,t),u=Ht(l,t),h=Math.sqrt(c.error*c.error+f.error*f.error+d.error*d.error+u.error*u.error),m=(c.averageSize+f.averageSize+d.averageSize+u.averageSize)/4,S=(Math.pow(c.averageSize-m,2)+Math.pow(f.averageSize-m,2)+Math.pow(d.averageSize-m,2)+Math.pow(u.averageSize-m,2))/m;return h+S}catch{return 1/0}}function un(e,t){let n=Math.round(t.x);for(;e.get(n,Math.round(t.y));)n--;let o=Math.round(t.x);for(;e.get(o,Math.round(t.y));)o++;const r=(n+o)/2;let i=Math.round(t.y);for(;e.get(Math.round(r),i);)i--;let s=Math.round(t.y);for(;e.get(Math.round(r),s);)s++;const a=(i+s)/2;return{x:r,y:a}}function Ls(e){const t=[];let n=[];const o=[];let r=[];for(let B=0;B<=e.height;B++){let C=0,N=!1,g=[0,0,0,0,0];for(let p=-1;p<=e.width;p++){const T=e.get(p,B);if(T===N)C++;else{g=[g[1],g[2],g[3],g[4],C],C=1,N=T;const E=xe(g)/7,O=Math.abs(g[0]-E)<E&&Math.abs(g[1]-E)<E&&Math.abs(g[2]-3*E)<3*E&&Math.abs(g[3]-E)<E&&Math.abs(g[4]-E)<E&&!T,x=xe(g.slice(-3))/3,b=Math.abs(g[2]-x)<x&&Math.abs(g[3]-x)<x&&Math.abs(g[4]-x)<x&&T;if(O){const y=p-g[3]-g[4],A=y-g[2],F={startX:A,endX:y,y:B},z=n.filter(D=>A>=D.bottom.startX&&A<=D.bottom.endX||y>=D.bottom.startX&&A<=D.bottom.endX||A<=D.bottom.startX&&y>=D.bottom.endX&&g[2]/(D.bottom.endX-D.bottom.startX)<zo&&g[2]/(D.bottom.endX-D.bottom.startX)>Ro);z.length>0?z[0].bottom=F:n.push({top:F,bottom:F})}if(b){const y=p-g[4],A=y-g[3],F={startX:A,y:B,endX:y},z=r.filter(D=>A>=D.bottom.startX&&A<=D.bottom.endX||y>=D.bottom.startX&&A<=D.bottom.endX||A<=D.bottom.startX&&y>=D.bottom.endX&&g[2]/(D.bottom.endX-D.bottom.startX)<zo&&g[2]/(D.bottom.endX-D.bottom.startX)>Ro);z.length>0?z[0].bottom=F:r.push({top:F,bottom:F})}}}t.push(...n.filter(p=>p.bottom.y!==B&&p.bottom.y-p.top.y>=2)),n=n.filter(p=>p.bottom.y===B),o.push(...r.filter(p=>p.bottom.y!==B)),r=r.filter(p=>p.bottom.y===B)}t.push(...n.filter(B=>B.bottom.y-B.top.y>=2)),o.push(...r);const i=[];for(const B of t){if(B.bottom.y-B.top.y<2)continue;const C=(B.top.startX+B.top.endX+B.bottom.startX+B.bottom.endX)/4,N=(B.top.y+B.bottom.y+1)/2;if(!e.get(Math.round(C),Math.round(N)))continue;const g=[B.top.endX-B.top.startX,B.bottom.endX-B.bottom.startX,B.bottom.y-B.top.y+1],p=xe(g)/g.length,T=Vr({x:Math.round(C),y:Math.round(N)},[1,1,3,1,1],e);i.push({score:T,x:C,y:N,size:p})}if(i.length<3)return null;i.sort((B,C)=>B.score-C.score);const s=[];for(let B=0;B<Math.min(i.length,vs);++B){const C=i[B],N=[];for(const g of i)g!==C&&N.push(Object.assign(Object.assign({},g),{score:g.score+Math.pow(g.size-C.size,2)/C.size}));N.sort((g,p)=>g.score-p.score),s.push({points:[C,N[0],N[1]],score:C.score+N[0].score+N[1].score})}s.sort((B,C)=>B.score-C.score);const a=s[0],{topRight:l,topLeft:c,bottomLeft:f}=Rs(...a.points),d=$o(e,o,l,c,f),u=[];d&&u.push({alignmentPattern:{x:d.alignmentPattern.x,y:d.alignmentPattern.y},bottomLeft:{x:f.x,y:f.y},dimension:d.dimension,topLeft:{x:c.x,y:c.y},topRight:{x:l.x,y:l.y}});const h=un(e,l),m=un(e,c),S=un(e,f),P=$o(e,o,h,m,S);return P&&u.push({alignmentPattern:{x:P.alignmentPattern.x,y:P.alignmentPattern.y},bottomLeft:{x:S.x,y:S.y},topLeft:{x:m.x,y:m.y},topRight:{x:h.x,y:h.y},dimension:P.dimension}),u.length===0?null:u}function $o(e,t,n,o,r){let i,s;try{({dimension:i,moduleSize:s}=zs(o,n,r,e))}catch{return null}const a={x:n.x-o.x+r.x,y:n.y-o.y+r.y},l=(Se(o,r)+Se(o,n))/2/s,c=1-3/l,f={x:o.x+c*(a.x-o.x),y:o.y+c*(a.y-o.y)},d=t.map(h=>{const m=(h.top.startX+h.top.endX+h.bottom.startX+h.bottom.endX)/4,S=(h.top.y+h.bottom.y+1)/2;if(!e.get(Math.floor(m),Math.floor(S)))return;const B=Vr({x:Math.floor(m),y:Math.floor(S)},[1,1,1],e)+Se({x:m,y:S},f);return{x:m,y:S,score:B}}).filter(h=>!!h).sort((h,m)=>h.score-m.score);return{alignmentPattern:l>=15&&d.length?d[0]:f,dimension:i}}function Do(e){const t=Ls(e);if(!t)return null;for(const n of t){const o=As(e,n),r=Ts(o.matrix);if(r)return{binaryData:r.bytes,data:r.text,chunks:r.chunks,version:r.version,location:{topRightCorner:o.mappingFunction(n.dimension,0),topLeftCorner:o.mappingFunction(0,0),bottomRightCorner:o.mappingFunction(n.dimension,n.dimension),bottomLeftCorner:o.mappingFunction(0,n.dimension),topRightFinderPattern:n.topRight,topLeftFinderPattern:n.topLeft,bottomLeftFinderPattern:n.bottomLeft,bottomRightAlignmentPattern:n.alignmentPattern},matrix:o.matrix}}return null}const $s={inversionAttempts:"attemptBoth",greyScaleWeights:{red:.2126,green:.7152,blue:.0722,useIntegerApproximation:!1},canOverwriteImage:!0};function Uo(e,t){Object.keys(t).forEach(n=>{e[n]=t[n]})}function Qn(e,t,n,o={}){const r=Object.create(null);Uo(r,$s),Uo(r,o);const i=r.inversionAttempts==="onlyInvert"||r.inversionAttempts==="invertFirst",s=r.inversionAttempts==="attemptBoth"||i,{binarized:a,inverted:l}=fs(e,t,n,s,r.greyScaleWeights,r.canOverwriteImage);let c=Do(i?l:a);return!c&&(r.inversionAttempts==="attemptBoth"||r.inversionAttempts==="invertFirst")&&(c=Do(i?a:l)),c}Qn.default=Qn;const Ds=(()=>{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return t=>e.call(t)})();function Qe(e){return Ds(e)==="Uint8Array"}function uo(e){return typeof e=="object"&&e!=null&&Symbol.toStringTag in e&&(e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer")}function et(e){return e instanceof RegExp||Object.prototype.toString.call(e)==="[object RegExp]"}function ho(e){return typeof e=="object"&&e!=null&&Symbol.toStringTag in e&&e[Symbol.toStringTag]==="Map"}function tt(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function q(e,t){return JSON.stringify(e,(n,o)=>typeof o=="bigint"?{$numberLong:`${o}`}:ho(o)?Object.fromEntries(o):o)}function Us(e){if(e!=null&&typeof e=="object"&&"stylize"in e&&typeof e.stylize=="function")return e.stylize}const je=6,rt=Symbol.for("@@mdb.bson.version"),zt=2147483647,Lt=-2147483648,Yr=Math.pow(2,63)-1,Xr=-Math.pow(2,63),Kr=Math.pow(2,53),Jr=-Math.pow(2,53),wo=1,Wr=2,go=3,Gr=4,mo=5,Ms=6,qr=7,Qr=8,ei=9,Bo=10,tn=11,Fs=12,ko=13,ti=14,ni=15,St=16,oi=17,_o=18,ri=19,ii=255,si=127,js=0,bo=4,Zs=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127});class _ extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(t,n){super(t,n)}static isBSONError(t){return t!=null&&typeof t=="object"&&"bsonError"in t&&t.bsonError===!0&&"name"in t&&"message"in t&&"stack"in t}}class it extends _{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${je}.x.x`)}}class eo extends _{get name(){return"BSONRuntimeError"}constructor(t){super(t)}}class be extends _{get name(){return"BSONOffsetError"}constructor(t,n,o){super(`${t}. offset: ${n}`,o),this.offset=n}}let Mo,Fo;function ai(e,t,n,o){if(o){Mo??=new TextDecoder("utf8",{fatal:!0});try{return Mo.decode(e.subarray(t,n))}catch(r){throw new _("Invalid UTF-8 string in BSON document",{cause:r})}}return Fo??=new TextDecoder("utf8",{fatal:!1}),Fo.decode(e.subarray(t,n))}function li(e,t,n){if(e.length===0)return"";const o=n-t;if(o===0)return"";if(o>20)return null;if(o===1&&e[t]<128)return String.fromCharCode(e[t]);if(o===2&&e[t]<128&&e[t+1]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);if(o===3&&e[t]<128&&e[t+1]<128&&e[t+2]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2]);const r=[];for(let i=t;i<n;i++){const s=e[i];if(s>127)return null;r.push(s)}return String.fromCharCode(...r)}function Hs(e,t,n){if(t.length===0)return 0;if(t.length>25||e.length-n<t.length)return null;for(let o=0,r=n;o<t.length;o++,r++){const i=t.charCodeAt(o);if(i>127)return null;e[r]=i}return t.length}function Vs(e){return _e.fromNumberArray(Array.from({length:e},()=>Math.floor(Math.random()*256)))}const Ys=Vs,_e={toLocalBufferType(e){if(Buffer.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if(t==="ArrayBuffer"||t==="SharedArrayBuffer"||t==="[object ArrayBuffer]"||t==="[object SharedArrayBuffer]")return Buffer.from(e);throw new _("Cannot create Buffer from the passed potentialBuffer.")},allocate(e){return Buffer.alloc(e)},allocateUnsafe(e){return Buffer.allocUnsafe(e)},equals(e,t){return _e.toLocalBufferType(e).equals(t)},fromNumberArray(e){return Buffer.from(e)},fromBase64(e){return Buffer.from(e,"base64")},toBase64(e){return _e.toLocalBufferType(e).toString("base64")},fromISO88591(e){return Buffer.from(e,"binary")},toISO88591(e){return _e.toLocalBufferType(e).toString("binary")},fromHex(e){return Buffer.from(e,"hex")},toHex(e){return _e.toLocalBufferType(e).toString("hex")},toUTF8(e,t,n,o){const r=n-t<=20?li(e,t,n):null;if(r!=null)return r;const i=_e.toLocalBufferType(e).toString("utf8",t,n);if(o){for(let s=0;s<i.length;s++)if(i.charCodeAt(s)===65533){ai(e,t,n,!0);break}}return i},utf8ByteLength(e){return Buffer.byteLength(e,"utf8")},encodeUTF8Into(e,t,n){const o=Hs(e,t,n);return o??_e.toLocalBufferType(e).write(t,n,void 0,"utf8")},randomBytes:Ys,swap32(e){return _e.toLocalBufferType(e).swap32()}};function Xs(){const{navigator:e}=globalThis;return typeof e=="object"&&e.product==="ReactNative"}function Ks(e){if(e<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${e}`);return Et.fromNumberArray(Array.from({length:e},()=>Math.floor(Math.random()*256)))}const Js=(()=>{const{crypto:e}=globalThis;if(e!=null&&typeof e.getRandomValues=="function")return t=>e.getRandomValues(Et.allocate(t));if(Xs()){const{console:t}=globalThis;t?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return Ks})(),jo=/(\d|[a-f])/i,Et={toLocalBufferType(e){const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if(t==="Uint8Array")return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));if(t==="ArrayBuffer"||t==="SharedArrayBuffer"||t==="[object ArrayBuffer]"||t==="[object SharedArrayBuffer]")return new Uint8Array(e);throw new _("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(e){if(typeof e!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(e)}`);return new Uint8Array(e)},allocateUnsafe(e){return Et.allocate(e)},equals(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},fromNumberArray(e){return Uint8Array.from(e)},fromBase64(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))},toBase64(e){return btoa(Et.toISO88591(e))},fromISO88591(e){return Uint8Array.from(e,t=>t.charCodeAt(0)&255)},toISO88591(e){return Array.from(Uint16Array.from(e),t=>String.fromCharCode(t)).join("")},fromHex(e){const t=e.length%2===0?e:e.slice(0,e.length-1),n=[];for(let o=0;o<t.length;o+=2){const r=t[o],i=t[o+1];if(!jo.test(r)||!jo.test(i))break;const s=Number.parseInt(`${r}${i}`,16);n.push(s)}return Uint8Array.from(n)},toHex(e){return Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")},toUTF8(e,t,n,o){const r=n-t<=20?li(e,t,n):null;return r??ai(e,t,n,o)},utf8ByteLength(e){return new TextEncoder().encode(e).byteLength},encodeUTF8Into(e,t,n){const o=new TextEncoder().encode(t);return e.set(o,n),o.byteLength},randomBytes:Js,swap32(e){if(e.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e.length;t+=4){const n=e[t],o=e[t+1],r=e[t+2],i=e[t+3];e[t]=i,e[t+1]=r,e[t+2]=o,e[t+3]=n}return e}},Ws=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,k=Ws?_e:Et;class Q{get[rt](){return je}[Symbol.for("nodejs.util.inspect.custom")](t,n,o){return this.inspect(t,n,o)}}const nt=new Float64Array(1),L=new Uint8Array(nt.buffer,0,8);nt[0]=-1;const hn=L[7]===0,v={isBigEndian:hn,getNonnegativeInt32LE(e,t){if(e[t+3]>127)throw new RangeError(`Size cannot be negative at offset: ${t}`);return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},getInt32LE(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},getUint32LE(e,t){return e[t]+e[t+1]*256+e[t+2]*65536+e[t+3]*16777216},getUint32BE(e,t){return e[t+3]+e[t+2]*256+e[t+1]*65536+e[t]*16777216},getBigInt64LE(e,t){const n=BigInt(e[t+4]+e[t+5]*256+e[t+6]*65536+(e[t+7]<<24)),o=BigInt(e[t]+e[t+1]*256+e[t+2]*65536+e[t+3]*16777216);return(n<<BigInt(32))+o},getFloat64LE:hn?(e,t)=>(L[7]=e[t],L[6]=e[t+1],L[5]=e[t+2],L[4]=e[t+3],L[3]=e[t+4],L[2]=e[t+5],L[1]=e[t+6],L[0]=e[t+7],nt[0]):(e,t)=>(L[0]=e[t],L[1]=e[t+1],L[2]=e[t+2],L[3]=e[t+3],L[4]=e[t+4],L[5]=e[t+5],L[6]=e[t+6],L[7]=e[t+7],nt[0]),setInt32BE(e,t,n){return e[t+3]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t]=n,4},setInt32LE(e,t,n){return e[t]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+3]=n,4},setBigInt64LE(e,t,n){const o=BigInt(4294967295);let r=Number(n&o);e[t]=r,r>>=8,e[t+1]=r,r>>=8,e[t+2]=r,r>>=8,e[t+3]=r;let i=Number(n>>BigInt(32)&o);return e[t+4]=i,i>>=8,e[t+5]=i,i>>=8,e[t+6]=i,i>>=8,e[t+7]=i,8},setFloat64LE:hn?(e,t,n)=>(nt[0]=n,e[t]=L[7],e[t+1]=L[6],e[t+2]=L[5],e[t+3]=L[4],e[t+4]=L[3],e[t+5]=L[2],e[t+6]=L[1],e[t+7]=L[0],8):(e,t,n)=>(nt[0]=n,e[t]=L[0],e[t+1]=L[1],e[t+2]=L[2],e[t+3]=L[3],e[t+4]=L[4],e[t+5]=L[5],e[t+6]=L[6],e[t+7]=L[7],8)};class I extends Q{get _bsontype(){return"Binary"}constructor(t,n){if(super(),t!=null&&typeof t=="string"&&!ArrayBuffer.isView(t)&&!uo(t)&&!Array.isArray(t))throw new _("Binary can only be constructed from Uint8Array or number[]");this.sub_type=n??I.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=k.allocate(I.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(t)?k.fromNumberArray(t):k.toLocalBufferType(t),this.position=this.buffer.byteLength)}put(t){if(typeof t=="string"&&t.length!==1)throw new _("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new _("only accepts single character Uint8Array or Array");let n;if(typeof t=="string"?n=t.charCodeAt(0):typeof t=="number"?n=t:n=t[0],n<0||n>255)throw new _("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=n;else{const o=k.allocate(I.BUFFER_SIZE+this.buffer.length);o.set(this.buffer,0),this.buffer=o,this.buffer[this.position++]=n}}write(t,n){if(n=typeof n=="number"?n:this.position,this.buffer.byteLength<n+t.length){const o=k.allocate(this.buffer.byteLength+t.length);o.set(this.buffer,0),this.buffer=o}if(ArrayBuffer.isView(t))this.buffer.set(k.toLocalBufferType(t),n),this.position=n+t.byteLength>this.position?n+t.length:this.position;else if(typeof t=="string")throw new _("input cannot be string")}read(t,n){n=n&&n>0?n:this.position;const o=t+n;return this.buffer.subarray(t,o>this.position?this.position:o)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return k.toBase64(this.buffer.subarray(0,this.position))}toString(t){return t==="hex"?k.toHex(this.buffer.subarray(0,this.position)):t==="base64"?k.toBase64(this.buffer.subarray(0,this.position)):t==="utf8"||t==="utf-8"?k.toUTF8(this.buffer,0,this.position,!1):k.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(t){t=t||{},this.sub_type===I.SUBTYPE_VECTOR&&Be(this);const n=k.toBase64(this.buffer),o=Number(this.sub_type).toString(16);return t.legacy?{$binary:n,$type:o.length===1?"0"+o:o}:{$binary:{base64:n,subType:o.length===1?"0"+o:o}}}toUUID(){if(this.sub_type===I.SUBTYPE_UUID)return new Y(this.buffer.subarray(0,this.position));throw new _(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${I.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(t,n){return new I(k.fromHex(t),n)}static createFromBase64(t,n){return new I(k.fromBase64(t),n)}static fromExtendedJSON(t,n){n=n||{};let o,r;if("$binary"in t?n.legacy&&typeof t.$binary=="string"&&"$type"in t?(r=t.$type?parseInt(t.$type,16):0,o=k.fromBase64(t.$binary)):typeof t.$binary!="string"&&(r=t.$binary.subType?parseInt(t.$binary.subType,16):0,o=k.fromBase64(t.$binary.base64)):"$uuid"in t&&(r=4,o=Y.bytesFromString(t.$uuid)),!o)throw new _(`Unexpected Binary Extended JSON format ${JSON.stringify(t)}`);return r===bo?new Y(o):new I(o,r)}inspect(t,n,o){o??=q;const r=k.toBase64(this.buffer.subarray(0,this.position)),i=o(r,n),s=o(this.sub_type,n);return`Binary.createFromBase64(${i}, ${s})`}toInt8Array(){if(this.sub_type!==I.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==I.VECTOR_TYPE.Int8)throw new _("Binary datatype field is not Int8");return Be(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==I.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==I.VECTOR_TYPE.Float32)throw new _("Binary datatype field is not Float32");Be(this);const t=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return v.isBigEndian&&k.swap32(t),new Float32Array(t.buffer)}toPackedBits(){if(this.sub_type!==I.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==I.VECTOR_TYPE.PackedBit)throw new _("Binary datatype field is not packed bit");return Be(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==I.SUBTYPE_VECTOR)throw new _("Binary sub_type is not Vector");if(this.buffer[0]!==I.VECTOR_TYPE.PackedBit)throw new _("Binary datatype field is not packed bit");Be(this);const n=(this.length()-2)*8-this.buffer[1],o=new Int8Array(n);for(let r=0;r<o.length;r++){const i=r/8|0,s=this.buffer[i+2],a=7-r%8,l=s>>a&1;o[r]=l}return o}static fromInt8Array(t){const n=k.allocate(t.byteLength+2);n[0]=I.VECTOR_TYPE.Int8,n[1]=0;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);n.set(o,2);const r=new this(n,this.SUBTYPE_VECTOR);return Be(r),r}static fromFloat32Array(t){const n=k.allocate(t.byteLength+2);n[0]=I.VECTOR_TYPE.Float32,n[1]=0;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);n.set(o,2),v.isBigEndian&&k.swap32(new Uint8Array(n.buffer,2));const r=new this(n,this.SUBTYPE_VECTOR);return Be(r),r}static fromPackedBits(t,n=0){const o=k.allocate(t.byteLength+2);o[0]=I.VECTOR_TYPE.PackedBit,o[1]=n,o.set(t,2);const r=new this(o,this.SUBTYPE_VECTOR);return Be(r),r}static fromBits(t){const n=t.length+7>>>3,o=new Uint8Array(n+2);o[0]=I.VECTOR_TYPE.PackedBit;const r=t.length%8;o[1]=r===0?0:8-r;for(let i=0;i<t.length;i++){const s=i>>>3,a=t[i];if(a!==0&&a!==1)throw new _(`Invalid bit value at ${i}: must be 0 or 1, found ${t[i]}`);if(a===0)continue;const l=7-i%8;o[s+2]|=a<<l}return new this(o,I.SUBTYPE_VECTOR)}}I.BSON_BINARY_SUBTYPE_DEFAULT=0;I.BUFFER_SIZE=256;I.SUBTYPE_DEFAULT=0;I.SUBTYPE_FUNCTION=1;I.SUBTYPE_BYTE_ARRAY=2;I.SUBTYPE_UUID_OLD=3;I.SUBTYPE_UUID=4;I.SUBTYPE_MD5=5;I.SUBTYPE_ENCRYPTED=6;I.SUBTYPE_COLUMN=7;I.SUBTYPE_SENSITIVE=8;I.SUBTYPE_VECTOR=9;I.SUBTYPE_USER_DEFINED=128;I.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function Be(e){if(e.sub_type!==I.SUBTYPE_VECTOR)return;const t=e.position,n=e.buffer[0],o=e.buffer[1];if((n===I.VECTOR_TYPE.Float32||n===I.VECTOR_TYPE.Int8)&&o!==0)throw new _("Invalid Vector: padding must be zero for int8 and float32 vectors");if(n===I.VECTOR_TYPE.Float32&&t!==0&&t-2!==0&&(t-2)%4!==0)throw new _("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(n===I.VECTOR_TYPE.PackedBit&&o!==0&&t===2)throw new _("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(n===I.VECTOR_TYPE.PackedBit&&o>7)throw new _(`Invalid Vector: padding must be a value between 0 and 7. found: ${o}`)}const wn=16,Gs=/^[0-9A-F]{32}$/i,qs=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class Y extends I{constructor(t){let n;if(t==null)n=Y.generate();else if(t instanceof Y)n=k.toLocalBufferType(new Uint8Array(t.buffer));else if(ArrayBuffer.isView(t)&&t.byteLength===wn)n=k.toLocalBufferType(t);else if(typeof t=="string")n=Y.bytesFromString(t);else throw new _("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(n,bo)}get id(){return this.buffer}set id(t){this.buffer=t}toHexString(t=!0){return t?[k.toHex(this.buffer.subarray(0,4)),k.toHex(this.buffer.subarray(4,6)),k.toHex(this.buffer.subarray(6,8)),k.toHex(this.buffer.subarray(8,10)),k.toHex(this.buffer.subarray(10,16))].join("-"):k.toHex(this.buffer)}toString(t){return t==="hex"?k.toHex(this.id):t==="base64"?k.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(t){if(!t)return!1;if(t instanceof Y)return k.equals(t.id,this.id);try{return k.equals(new Y(t).id,this.id)}catch{return!1}}toBinary(){return new I(this.id,I.SUBTYPE_UUID)}static generate(){const t=k.randomBytes(wn);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}static isValid(t){return t?typeof t=="string"?Y.isValidUUIDString(t):Qe(t)?t.byteLength===wn:t._bsontype==="Binary"&&t.sub_type===this.SUBTYPE_UUID&&t.buffer.byteLength===16:!1}static createFromHexString(t){const n=Y.bytesFromString(t);return new Y(n)}static createFromBase64(t){return new Y(k.fromBase64(t))}static bytesFromString(t){if(!Y.isValidUUIDString(t))throw new _("UUID string representation must be 32 hex digits or canonical hyphenated representation");return k.fromHex(t.replace(/-/g,""))}static isValidUUIDString(t){return Gs.test(t)||qs.test(t)}inspect(t,n,o){return o??=q,`new UUID(${o(this.toHexString(),n)})`}}class ze extends Q{get _bsontype(){return"Code"}constructor(t,n){super(),this.code=t.toString(),this.scope=n??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(t){return new ze(t.$code,t.$scope)}inspect(t,n,o){o??=q;let r=o(this.code,n);const i=r.includes(`
`);this.scope!=null&&(r+=`,${i?`
`:" "}${o(this.scope,n)}`);const s=i&&this.scope===null;return`new Code(${i?`
`:""}${r}${s?`
`:""})`}}function ci(e){return e!=null&&typeof e=="object"&&"$id"in e&&e.$id!=null&&"$ref"in e&&typeof e.$ref=="string"&&(!("$db"in e)||"$db"in e&&typeof e.$db=="string")}class Ee extends Q{get _bsontype(){return"DBRef"}constructor(t,n,o,r){super();const i=t.split(".");i.length===2&&(o=i.shift(),t=i.shift()),this.collection=t,this.oid=n,this.db=o,this.fields=r||{}}get namespace(){return this.collection}set namespace(t){this.collection=t}toJSON(){const t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t}toExtendedJSON(t){t=t||{};let n={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(n.$db=this.db),n=Object.assign(n,this.fields)),n}static fromExtendedJSON(t){const n=Object.assign({},t);return delete n.$ref,delete n.$id,delete n.$db,new Ee(t.$ref,t.$id,t.$db,n)}inspect(t,n,o){o??=q;const r=[o(this.namespace,n),o(this.oid,n),...this.db?[o(this.db,n)]:[],...Object.keys(this.fields).length>0?[o(this.fields,n)]:[]];return r[1]=o===q?`new ObjectId(${r[1]})`:r[1],`new DBRef(${r.join(", ")})`}}function fi(e){if(e==="")return e;let t=0;const n=e[t]==="-",o=e[t]==="+";(o||n)&&(t+=1);let r=!1;for(;t<e.length&&e[t]==="0";++t)r=!0;return r?`${n?"-":""}${e.length===t?"0":e.slice(t)}`:o?e.slice(1):e}function Qs(e,t){t=t??10;const n="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,t);return new RegExp(`[^-+${n}]`,"i").test(e)?!1:e}let ee;try{ee=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const Zo=65536,ea=1<<24,ot=Zo*Zo,di=ot*ot,ta=di/2,Ho={},Vo={},na=20,oa=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class w extends Q{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(t=0,n,o){super();const r=typeof n=="boolean"?n:!!o,i=typeof n=="number"?n:0,s=typeof t=="string"?w.fromString(t,r):typeof t=="bigint"?w.fromBigInt(t,r):{low:t|0,high:i|0,unsigned:r};this.low=s.low,this.high=s.high,this.unsigned=s.unsigned}static fromBits(t,n,o){return new w(t,n,o)}static fromInt(t,n){let o,r,i;return n?(t>>>=0,(i=0<=t&&t<256)&&(r=Vo[t],r)?r:(o=w.fromBits(t,(t|0)<0?-1:0,!0),i&&(Vo[t]=o),o)):(t|=0,(i=-128<=t&&t<128)&&(r=Ho[t],r)?r:(o=w.fromBits(t,t<0?-1:0,!1),i&&(Ho[t]=o),o))}static fromNumber(t,n){if(isNaN(t))return n?w.UZERO:w.ZERO;if(n){if(t<0)return w.UZERO;if(t>=di)return w.MAX_UNSIGNED_VALUE}else{if(t<=-9223372036854776e3)return w.MIN_VALUE;if(t+1>=ta)return w.MAX_VALUE}return t<0?w.fromNumber(-t,n).neg():w.fromBits(t%ot|0,t/ot|0,n)}static fromBigInt(t,n){const o=BigInt(4294967295),r=BigInt(32);return new w(Number(t&o),Number(t>>r&o),n)}static _fromString(t,n,o){if(t.length===0)throw new _("empty string");if(o<2||36<o)throw new _("radix");let r;if((r=t.indexOf("-"))>0)throw new _("interior hyphen");if(r===0)return w._fromString(t.substring(1),n,o).neg();const i=w.fromNumber(Math.pow(o,8));let s=w.ZERO;for(let a=0;a<t.length;a+=8){const l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),o);if(l<8){const f=w.fromNumber(Math.pow(o,l));s=s.mul(f).add(w.fromNumber(c))}else s=s.mul(i),s=s.add(w.fromNumber(c))}return s.unsigned=n,s}static fromStringStrict(t,n,o){let r=!1;if(typeof n=="number"?(o=n,n=!1):r=!!n,o??=10,t.trim()!==t)throw new _(`Input: '${t}' contains leading and/or trailing whitespace`);if(!Qs(t,o))throw new _(`Input: '${t}' contains invalid characters for radix: ${o}`);const i=fi(t),s=w._fromString(i,r,o);if(s.toString(o).toLowerCase()!==i.toLowerCase())throw new _(`Input: ${t} is not representable as ${s.unsigned?"an unsigned":"a signed"} 64-bit Long ${o!=null?`with radix: ${o}`:""}`);return s}static fromString(t,n,o){let r=!1;return typeof n=="number"?(o=n,n=!1):r=!!n,o??=10,t==="NaN"&&o<24||(t==="Infinity"||t==="+Infinity"||t==="-Infinity")&&o<35?w.ZERO:w._fromString(t,r,o)}static fromBytes(t,n,o){return o?w.fromBytesLE(t,n):w.fromBytesBE(t,n)}static fromBytesLE(t,n){return new w(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)}static fromBytesBE(t,n){return new w(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}static isLong(t){return t!=null&&typeof t=="object"&&"__isLong__"in t&&t.__isLong__===!0}static fromValue(t,n){return typeof t=="number"?w.fromNumber(t,n):typeof t=="string"?w.fromString(t,n):w.fromBits(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}add(t){w.isLong(t)||(t=w.fromValue(t));const n=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,s=t.high>>>16,a=t.high&65535,l=t.low>>>16,c=t.low&65535;let f=0,d=0,u=0,h=0;return h+=i+c,u+=h>>>16,h&=65535,u+=r+l,d+=u>>>16,u&=65535,d+=o+a,f+=d>>>16,d&=65535,f+=n+s,f&=65535,w.fromBits(u<<16|h,f<<16|d,this.unsigned)}and(t){return w.isLong(t)||(t=w.fromValue(t)),w.fromBits(this.low&t.low,this.high&t.high,this.unsigned)}compare(t){if(w.isLong(t)||(t=w.fromValue(t)),this.eq(t))return 0;const n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1}comp(t){return this.compare(t)}divide(t){if(w.isLong(t)||(t=w.fromValue(t)),t.isZero())throw new _("division by zero");if(ee){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;const i=(this.unsigned?ee.div_u:ee.div_s)(this.low,this.high,t.low,t.high);return w.fromBits(i,ee.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w.UZERO:w.ZERO;let n,o,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return w.UZERO;if(t.gt(this.shru(1)))return w.UONE;r=w.UZERO}else{if(this.eq(w.MIN_VALUE))return t.eq(w.ONE)||t.eq(w.NEG_ONE)?w.MIN_VALUE:t.eq(w.MIN_VALUE)?w.ONE:(n=this.shr(1).div(t).shl(1),n.eq(w.ZERO)?t.isNegative()?w.ONE:w.NEG_ONE:(o=this.sub(t.mul(n)),r=n.add(o.div(t)),r));if(t.eq(w.MIN_VALUE))return this.unsigned?w.UZERO:w.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=w.ZERO}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));const i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Math.pow(2,i-48);let a=w.fromNumber(n),l=a.mul(t);for(;l.isNegative()||l.gt(o);)n-=s,a=w.fromNumber(n,this.unsigned),l=a.mul(t);a.isZero()&&(a=w.ONE),r=r.add(a),o=o.sub(l)}return r}div(t){return this.divide(t)}equals(t){return w.isLong(t)||(t=w.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low}eq(t){return this.equals(t)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(w.MIN_VALUE)?64:this.neg().getNumBitsAbs();const t=this.high!==0?this.high:this.low;let n;for(n=31;n>0&&!(t&1<<n);n--);return this.high!==0?n+33:n+1}greaterThan(t){return this.comp(t)>0}gt(t){return this.greaterThan(t)}greaterThanOrEqual(t){return this.comp(t)>=0}gte(t){return this.greaterThanOrEqual(t)}ge(t){return this.greaterThanOrEqual(t)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(t){return this.comp(t)<0}lt(t){return this.lessThan(t)}lessThanOrEqual(t){return this.comp(t)<=0}lte(t){return this.lessThanOrEqual(t)}modulo(t){if(w.isLong(t)||(t=w.fromValue(t)),ee){const n=(this.unsigned?ee.rem_u:ee.rem_s)(this.low,this.high,t.low,t.high);return w.fromBits(n,ee.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))}mod(t){return this.modulo(t)}rem(t){return this.modulo(t)}multiply(t){if(this.isZero())return w.ZERO;if(w.isLong(t)||(t=w.fromValue(t)),ee){const m=ee.mul(this.low,this.high,t.low,t.high);return w.fromBits(m,ee.get_high(),this.unsigned)}if(t.isZero())return w.ZERO;if(this.eq(w.MIN_VALUE))return t.isOdd()?w.MIN_VALUE:w.ZERO;if(t.eq(w.MIN_VALUE))return this.isOdd()?w.MIN_VALUE:w.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w.TWO_PWR_24)&&t.lt(w.TWO_PWR_24))return w.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);const n=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,s=t.high>>>16,a=t.high&65535,l=t.low>>>16,c=t.low&65535;let f=0,d=0,u=0,h=0;return h+=i*c,u+=h>>>16,h&=65535,u+=r*c,d+=u>>>16,u&=65535,u+=i*l,d+=u>>>16,u&=65535,d+=o*c,f+=d>>>16,d&=65535,d+=r*l,f+=d>>>16,d&=65535,d+=i*a,f+=d>>>16,d&=65535,f+=n*c+o*l+r*a+i*s,f&=65535,w.fromBits(u<<16|h,f<<16|d,this.unsigned)}mul(t){return this.multiply(t)}negate(){return!this.unsigned&&this.eq(w.MIN_VALUE)?w.MIN_VALUE:this.not().add(w.ONE)}neg(){return this.negate()}not(){return w.fromBits(~this.low,~this.high,this.unsigned)}notEquals(t){return!this.equals(t)}neq(t){return this.notEquals(t)}ne(t){return this.notEquals(t)}or(t){return w.isLong(t)||(t=w.fromValue(t)),w.fromBits(this.low|t.low,this.high|t.high,this.unsigned)}shiftLeft(t){return w.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?w.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):w.fromBits(0,this.low<<t-32,this.unsigned)}shl(t){return this.shiftLeft(t)}shiftRight(t){return w.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?w.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):w.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)}shr(t){return this.shiftRight(t)}shiftRightUnsigned(t){if(w.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;{const n=this.high;if(t<32){const o=this.low;return w.fromBits(o>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?w.fromBits(n,0,this.unsigned):w.fromBits(n>>>t-32,0,this.unsigned)}}shr_u(t){return this.shiftRightUnsigned(t)}shru(t){return this.shiftRightUnsigned(t)}subtract(t){return w.isLong(t)||(t=w.fromValue(t)),this.add(t.neg())}sub(t){return this.subtract(t)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*ot+(this.low>>>0):this.high*ot+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(t){return t?this.toBytesLE():this.toBytesBE()}toBytesLE(){const t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]}toBytesBE(){const t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]}toSigned(){return this.unsigned?w.fromBits(this.low,this.high,!1):this}toString(t){if(t=t||10,t<2||36<t)throw new _("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(w.MIN_VALUE)){const i=w.fromNumber(t),s=this.div(i),a=s.mul(i).sub(this);return s.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);const n=w.fromNumber(Math.pow(t,6),this.unsigned);let o=this,r="";for(;;){const i=o.div(n);let a=(o.sub(i.mul(n)).toInt()>>>0).toString(t);if(o=i,o.isZero())return a+r;for(;a.length<6;)a="0"+a;r=""+a+r}}toUnsigned(){return this.unsigned?this:w.fromBits(this.low,this.high,!0)}xor(t){return w.isLong(t)||(t=w.fromValue(t)),w.fromBits(this.low^t.low,this.high^t.high,this.unsigned)}eqz(){return this.isZero()}le(t){return this.lessThanOrEqual(t)}toExtendedJSON(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(t,n){const{useBigInt64:o=!1,relaxed:r=!0}={...n};if(t.$numberLong.length>na)throw new _("$numberLong string is too long");if(!oa.test(t.$numberLong))throw new _(`$numberLong string "${t.$numberLong}" is in an invalid format`);if(o){const s=BigInt(t.$numberLong);return BigInt.asIntN(64,s)}const i=w.fromString(t.$numberLong);return r?i.toNumber():i}inspect(t,n,o){o??=q;const r=o(this.toString(),n),i=this.unsigned?`, ${o(this.unsigned,n)}`:"";return`new Long(${r}${i})`}}w.TWO_PWR_24=w.fromInt(ea);w.MAX_UNSIGNED_VALUE=w.fromBits(-1,-1,!0);w.ZERO=w.fromInt(0);w.UZERO=w.fromInt(0,!0);w.ONE=w.fromInt(1);w.UONE=w.fromInt(1,!0);w.NEG_ONE=w.fromInt(-1);w.MAX_VALUE=w.fromBits(-1,2147483647,!1);w.MIN_VALUE=w.fromBits(0,-2147483648,!1);const ra=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,ia=/^(\+|-)?(Infinity|inf)$/i,sa=/^(\+|-)?NaN$/i,Ke=6111,Bt=-6176,Yo=6176,Xo=34,gn=k.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Ko=k.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Jo=k.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),aa=/^([-+])?(\d+)?$/,la=31,Wo=16383,ca=30,fa=31;function Go(e){return!isNaN(parseInt(e,10))}function da(e){const t=w.fromNumber(1e9);let n=w.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:n};for(let o=0;o<=3;o++)n=n.shiftLeft(32),n=n.add(new w(e.parts[o],0)),e.parts[o]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function ua(e,t){if(!e&&!t)return{high:w.fromNumber(0),low:w.fromNumber(0)};const n=e.shiftRightUnsigned(32),o=new w(e.getLowBits(),0),r=t.shiftRightUnsigned(32),i=new w(t.getLowBits(),0);let s=n.multiply(r),a=n.multiply(i);const l=o.multiply(r);let c=o.multiply(i);return s=s.add(a.shiftRightUnsigned(32)),a=new w(a.getLowBits(),0).add(l).add(c.shiftRightUnsigned(32)),s=s.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new w(c.getLowBits(),0)),{high:s,low:c}}function ha(e,t){const n=e.high>>>0,o=t.high>>>0;if(n<o)return!0;if(n===o){const r=e.low>>>0,i=t.low>>>0;if(r<i)return!0}return!1}function oe(e,t){throw new _(`"${e}" is not a valid Decimal128 string - ${t}`)}class X extends Q{get _bsontype(){return"Decimal128"}constructor(t){if(super(),typeof t=="string")this.bytes=X.fromString(t).bytes;else if(t instanceof Uint8Array||Qe(t)){if(t.byteLength!==16)throw new _("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new _("Decimal128 must take a Buffer or string")}static fromString(t){return X._fromString(t,{allowRounding:!1})}static fromStringWithRounding(t){return X._fromString(t,{allowRounding:!0})}static _fromString(t,n){let o=!1,r=!1,i=!1,s=!1,a=0,l=0,c=0,f=0,d=0;const u=[0];let h=0,m=0,S=0,P=0,B=new w(0,0),C=new w(0,0),N=0,g=0;if(t.length>=7e3)throw new _(""+t+" not a valid Decimal128 string");const p=t.match(ra),T=t.match(ia),E=t.match(sa);if(!p&&!T&&!E||t.length===0)throw new _(""+t+" not a valid Decimal128 string");if(p){const y=p[2],A=p[4],F=p[5],z=p[6];A&&z===void 0&&oe(t,"missing exponent power"),A&&y===void 0&&oe(t,"missing exponent base"),A===void 0&&(F||z)&&oe(t,"missing e before exponent")}if((t[g]==="+"||t[g]==="-")&&(r=!0,o=t[g++]==="-"),!Go(t[g])&&t[g]!=="."){if(t[g]==="i"||t[g]==="I")return new X(o?Ko:Jo);if(t[g]==="N")return new X(gn)}for(;Go(t[g])||t[g]===".";){if(t[g]==="."){i&&oe(t,"contains multiple periods"),i=!0,g=g+1;continue}h<Xo&&(t[g]!=="0"||s)&&(s||(d=l),s=!0,u[m++]=parseInt(t[g],10),h=h+1),s&&(c=c+1),i&&(f=f+1),l=l+1,g=g+1}if(i&&!l)throw new _(""+t+" not a valid Decimal128 string");if(t[g]==="e"||t[g]==="E"){const y=t.substr(++g).match(aa);if(!y||!y[2])return new X(gn);P=parseInt(y[0],10),g=g+y[0].length}if(t[g])return new X(gn);if(!h)u[0]=0,c=1,h=1,a=0;else if(S=h-1,a=c,a!==1)for(;t[d+a-1+Number(r)+Number(i)]==="0";)a=a-1;for(P<=f&&f>P+16384?P=Bt:P=P-f;P>Ke;){if(S=S+1,S>=Xo){if(a===0){P=Ke;break}oe(t,"overflow")}P=P-1}if(n.allowRounding){for(;P<Bt||h<c;){if(S===0&&a<h){P=Bt,a=0;break}if(h<c?c=c-1:S=S-1,P<Ke)P=P+1;else{if(u.join("").match(/^0+$/)){P=Ke;break}oe(t,"overflow")}}if(S+1<a){let y=l;i&&(d=d+1,y=y+1),r&&(d=d+1,y=y+1);const A=parseInt(t[d+S+1],10);let F=0;if(A>=5&&(F=1,A===5)){F=u[S]%2===1?1:0;for(let z=d+S+2;z<y;z++)if(parseInt(t[z],10)){F=1;break}}if(F){let z=S;for(;z>=0&&++u[z]>9;z--)if(u[z]=0,z===0)if(P<Ke)P=P+1,u[z]=1;else return new X(o?Ko:Jo)}}}else{for(;P<Bt||h<c;){if(S===0){if(a===0){P=Bt;break}oe(t,"exponent underflow")}h<c?(t[c-1+Number(r)+Number(i)]!=="0"&&a!==0&&oe(t,"inexact rounding"),c=c-1):(u[S]!==0&&oe(t,"inexact rounding"),S=S-1),P<Ke?P=P+1:oe(t,"overflow")}S+1<a&&(i&&(d=d+1),r&&(d=d+1),parseInt(t[d+S+1],10)!==0&&oe(t,"inexact rounding"))}if(B=w.fromNumber(0),C=w.fromNumber(0),a===0)B=w.fromNumber(0),C=w.fromNumber(0);else if(S<17){let y=0;for(C=w.fromNumber(u[y++]),B=new w(0,0);y<=S;y++)C=C.multiply(w.fromNumber(10)),C=C.add(w.fromNumber(u[y]))}else{let y=0;for(B=w.fromNumber(u[y++]);y<=S-17;y++)B=B.multiply(w.fromNumber(10)),B=B.add(w.fromNumber(u[y]));for(C=w.fromNumber(u[y++]);y<=S;y++)C=C.multiply(w.fromNumber(10)),C=C.add(w.fromNumber(u[y]))}const O=ua(B,w.fromString("100000000000000000"));O.low=O.low.add(C),ha(O.low,C)&&(O.high=O.high.add(w.fromNumber(1))),N=P+Yo;const x={low:w.fromNumber(0),high:w.fromNumber(0)};O.high.shiftRightUnsigned(49).and(w.fromNumber(1)).equals(w.fromNumber(1))?(x.high=x.high.or(w.fromNumber(3).shiftLeft(61)),x.high=x.high.or(w.fromNumber(N).and(w.fromNumber(16383).shiftLeft(47))),x.high=x.high.or(O.high.and(w.fromNumber(0x7fffffffffff)))):(x.high=x.high.or(w.fromNumber(N&16383).shiftLeft(49)),x.high=x.high.or(O.high.and(w.fromNumber(562949953421311)))),x.low=O.low,o&&(x.high=x.high.or(w.fromString("9223372036854775808")));const b=k.allocateUnsafe(16);return g=0,b[g++]=x.low.low&255,b[g++]=x.low.low>>8&255,b[g++]=x.low.low>>16&255,b[g++]=x.low.low>>24&255,b[g++]=x.low.high&255,b[g++]=x.low.high>>8&255,b[g++]=x.low.high>>16&255,b[g++]=x.low.high>>24&255,b[g++]=x.high.low&255,b[g++]=x.high.low>>8&255,b[g++]=x.high.low>>16&255,b[g++]=x.high.low>>24&255,b[g++]=x.high.high&255,b[g++]=x.high.high>>8&255,b[g++]=x.high.high>>16&255,b[g++]=x.high.high>>24&255,new X(b)}toString(){let t,n=0;const o=new Array(36);for(let g=0;g<o.length;g++)o[g]=0;let r=0,i=!1,s,a={parts:[0,0,0,0]},l,c;const f=[];r=0;const d=this.bytes,u=d[r++]|d[r++]<<8|d[r++]<<16|d[r++]<<24,h=d[r++]|d[r++]<<8|d[r++]<<16|d[r++]<<24,m=d[r++]|d[r++]<<8|d[r++]<<16|d[r++]<<24,S=d[r++]|d[r++]<<8|d[r++]<<16|d[r++]<<24;r=0,{low:new w(u,h),high:new w(m,S)}.high.lessThan(w.ZERO)&&f.push("-");const B=S>>26&la;if(B>>3===3){if(B===ca)return f.join("")+"Infinity";if(B===fa)return"NaN";t=S>>15&Wo,s=8+(S>>14&1)}else s=S>>14&7,t=S>>17&Wo;const C=t-Yo;if(a.parts[0]=(S&16383)+((s&15)<<14),a.parts[1]=m,a.parts[2]=h,a.parts[3]=u,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)i=!0;else for(c=3;c>=0;c--){let g=0;const p=da(a);if(a=p.quotient,g=p.rem.low,!!g)for(l=8;l>=0;l--)o[c*9+l]=g%10,g=Math.floor(g/10)}if(i)n=1,o[r]=0;else for(n=36;!o[r];)n=n-1,r=r+1;const N=n-1+C;if(N>=34||N<=-7||C>0){if(n>34)return f.push("0"),C>0?f.push(`E+${C}`):C<0&&f.push(`E${C}`),f.join("");f.push(`${o[r++]}`),n=n-1,n&&f.push(".");for(let g=0;g<n;g++)f.push(`${o[r++]}`);f.push("E"),N>0?f.push(`+${N}`):f.push(`${N}`)}else if(C>=0)for(let g=0;g<n;g++)f.push(`${o[r++]}`);else{let g=n+C;if(g>0)for(let p=0;p<g;p++)f.push(`${o[r++]}`);else f.push("0");for(f.push(".");g++<0;)f.push("0");for(let p=0;p<n-Math.max(g-1,0);p++)f.push(`${o[r++]}`)}return f.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(t){return X.fromString(t.$numberDecimal)}inspect(t,n,o){return o??=q,`new Decimal128(${o(this.toString(),n)})`}}class se extends Q{get _bsontype(){return"Double"}constructor(t){super(),t instanceof Number&&(t=t.valueOf()),this.value=+t}static fromString(t){const n=Number(t);if(t==="NaN")return new se(NaN);if(t==="Infinity")return new se(1/0);if(t==="-Infinity")return new se(-1/0);if(!Number.isFinite(n))throw new _(`Input: ${t} is not representable as a Double`);if(t.trim()!==t)throw new _(`Input: '${t}' contains whitespace`);if(t==="")throw new _("Input is an empty string");if(/[^-0-9.+eE]/.test(t))throw new _(`Input: '${t}' is not in decimal or exponential notation`);return new se(n)}valueOf(){return this.value}toJSON(){return this.value}toString(t){return this.value.toString(t)}toExtendedJSON(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(t,n){const o=parseFloat(t.$numberDouble);return n&&n.relaxed?o:new se(o)}inspect(t,n,o){return o??=q,`new Double(${o(this.value,n)})`}}class Le extends Q{get _bsontype(){return"Int32"}constructor(t){super(),t instanceof Number&&(t=t.valueOf()),this.value=+t|0}static fromString(t){const n=fi(t),o=Number(t);if(zt<o)throw new _(`Input: '${t}' is larger than the maximum value for Int32`);if(Lt>o)throw new _(`Input: '${t}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(o)){if(o.toString()!==n)throw new _(`Input: '${t}' is not a valid Int32 string`)}else throw new _(`Input: '${t}' is not a safe integer`);return new Le(o)}valueOf(){return this.value}toString(t){return this.value.toString(t)}toJSON(){return this.value}toExtendedJSON(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new Le(t.$numberInt)}inspect(t,n,o){return o??=q,`new Int32(${o(this.value,n)})`}}class ct extends Q{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new ct}inspect(){return"new MaxKey()"}}class ft extends Q{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new ft}inspect(){return"new MinKey()"}}let $e=null;const kt=new WeakMap;class U extends Q{get _bsontype(){return"ObjectId"}constructor(t){super();let n;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new _("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?n=k.fromHex(t.toHexString()):n=t.id}else n=t;if(n==null||typeof n=="number")this.buffer=U.generate(typeof n=="number"?n:void 0);else if(ArrayBuffer.isView(n)&&n.byteLength===12)this.buffer=k.toLocalBufferType(n);else if(typeof n=="string")if(U.validateHexString(n))this.buffer=k.fromHex(n),U.cacheHexString&&kt.set(this,n);else throw new _("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new _("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(t){this.buffer=t,U.cacheHexString&&kt.set(this,k.toHex(t))}static validateHexString(t){if(t?.length!==24)return!1;for(let n=0;n<24;n++){const o=t.charCodeAt(n);if(!(o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70))return!1}return!0}toHexString(){if(U.cacheHexString){const n=kt.get(this);if(n)return n}const t=k.toHex(this.id);return U.cacheHexString&&kt.set(this,t),t}static getInc(){return U.index=(U.index+1)%16777215}static generate(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));const n=U.getInc(),o=k.allocateUnsafe(12);return v.setInt32BE(o,0,t),$e===null&&($e=k.randomBytes(5)),o[4]=$e[0],o[5]=$e[1],o[6]=$e[2],o[7]=$e[3],o[8]=$e[4],o[11]=n&255,o[10]=n>>8&255,o[9]=n>>16&255,o}toString(t){return t==="base64"?k.toBase64(this.id):t==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&t._bsontype==="ObjectId"}equals(t){if(t==null)return!1;if(U.is(t))return this.buffer[11]===t.buffer[11]&&k.equals(this.buffer,t.buffer);if(typeof t=="string")return t.toLowerCase()===this.toHexString();if(typeof t=="object"&&typeof t.toHexString=="function"){const n=t.toHexString(),o=this.toHexString();return typeof n=="string"&&n.toLowerCase()===o}return!1}getTimestamp(){const t=new Date,n=v.getUint32BE(this.buffer,0);return t.setTime(Math.floor(n)*1e3),t}static createPk(){return new U}serializeInto(t,n){return t[n]=this.buffer[0],t[n+1]=this.buffer[1],t[n+2]=this.buffer[2],t[n+3]=this.buffer[3],t[n+4]=this.buffer[4],t[n+5]=this.buffer[5],t[n+6]=this.buffer[6],t[n+7]=this.buffer[7],t[n+8]=this.buffer[8],t[n+9]=this.buffer[9],t[n+10]=this.buffer[10],t[n+11]=this.buffer[11],12}static createFromTime(t){const n=k.allocate(12);for(let o=11;o>=4;o--)n[o]=0;return v.setInt32BE(n,0,t),new U(n)}static createFromHexString(t){if(t?.length!==24)throw new _("hex string must be 24 characters");return new U(k.fromHex(t))}static createFromBase64(t){if(t?.length!==16)throw new _("base64 string must be 16 characters");return new U(k.fromBase64(t))}static isValid(t){if(t==null)return!1;if(typeof t=="string")return U.validateHexString(t);try{return new U(t),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(t){return new U(t.$oid)}isCached(){return U.cacheHexString&&kt.has(this)}inspect(t,n,o){return o??=q,`new ObjectId(${o(this.toHexString(),n)})`}}U.index=Math.floor(Math.random()*16777215);function Wt(e,t,n){let o=5;if(Array.isArray(e))for(let r=0;r<e.length;r++)o+=qo(r.toString(),e[r],t,!0,n);else{typeof e?.toBSON=="function"&&(e=e.toBSON());for(const r of Object.keys(e))o+=qo(r,e[r],t,!1,n)}return o}function qo(e,t,n=!1,o=!1,r=!1){switch(typeof t?.toBSON=="function"&&(t=t.toBSON()),typeof t){case"string":return 1+k.utf8ByteLength(e)+1+4+k.utf8ByteLength(t)+1;case"number":return Math.floor(t)===t&&t>=Jr&&t<=Kr&&t>=Lt&&t<=zt?(e!=null?k.utf8ByteLength(e)+1:0)+5:(e!=null?k.utf8ByteLength(e)+1:0)+9;case"undefined":return o||!r?(e!=null?k.utf8ByteLength(e)+1:0)+1:0;case"boolean":return(e!=null?k.utf8ByteLength(e)+1:0)+2;case"object":if(t!=null&&typeof t._bsontype=="string"&&t[rt]!==je)throw new it;if(t==null||t._bsontype==="MinKey"||t._bsontype==="MaxKey")return(e!=null?k.utf8ByteLength(e)+1:0)+1;if(t._bsontype==="ObjectId")return(e!=null?k.utf8ByteLength(e)+1:0)+13;if(t instanceof Date||tt(t))return(e!=null?k.utf8ByteLength(e)+1:0)+9;if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||uo(t))return(e!=null?k.utf8ByteLength(e)+1:0)+6+t.byteLength;if(t._bsontype==="Long"||t._bsontype==="Double"||t._bsontype==="Timestamp")return(e!=null?k.utf8ByteLength(e)+1:0)+9;if(t._bsontype==="Decimal128")return(e!=null?k.utf8ByteLength(e)+1:0)+17;if(t._bsontype==="Code")return t.scope!=null&&Object.keys(t.scope).length>0?(e!=null?k.utf8ByteLength(e)+1:0)+1+4+4+k.utf8ByteLength(t.code.toString())+1+Wt(t.scope,n,r):(e!=null?k.utf8ByteLength(e)+1:0)+1+4+k.utf8ByteLength(t.code.toString())+1;if(t._bsontype==="Binary"){const i=t;return i.sub_type===I.SUBTYPE_BYTE_ARRAY?(e!=null?k.utf8ByteLength(e)+1:0)+(i.position+1+4+1+4):(e!=null?k.utf8ByteLength(e)+1:0)+(i.position+1+4+1)}else{if(t._bsontype==="Symbol")return(e!=null?k.utf8ByteLength(e)+1:0)+k.utf8ByteLength(t.value)+4+1+1;if(t._bsontype==="DBRef"){const i=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return t.db!=null&&(i.$db=t.db),(e!=null?k.utf8ByteLength(e)+1:0)+1+Wt(i,n,r)}else return t instanceof RegExp||et(t)?(e!=null?k.utf8ByteLength(e)+1:0)+1+k.utf8ByteLength(t.source)+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t._bsontype==="BSONRegExp"?(e!=null?k.utf8ByteLength(e)+1:0)+1+k.utf8ByteLength(t.pattern)+1+k.utf8ByteLength(t.options)+1:(e!=null?k.utf8ByteLength(e)+1:0)+Wt(t,n,r)+1}case"function":return n?(e!=null?k.utf8ByteLength(e)+1:0)+1+4+k.utf8ByteLength(t.toString())+1:0;case"bigint":return(e!=null?k.utf8ByteLength(e)+1:0)+9;case"symbol":return 0;default:throw new _(`Unrecognized JS type: ${typeof t}`)}}function wa(e){return e.split("").sort().join("")}class le extends Q{get _bsontype(){return"BSONRegExp"}constructor(t,n){if(super(),this.pattern=t,this.options=wa(n??""),this.pattern.indexOf("\0")!==-1)throw new _(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new _(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let o=0;o<this.options.length;o++)if(!(this.options[o]==="i"||this.options[o]==="m"||this.options[o]==="x"||this.options[o]==="l"||this.options[o]==="s"||this.options[o]==="u"))throw new _(`The regular expression option [${this.options[o]}] is not supported`)}static parseOptions(t){return t?t.split("").sort().join(""):""}toExtendedJSON(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new le(t.$regex,le.parseOptions(t.$options));if("$regularExpression"in t)return new le(t.$regularExpression.pattern,le.parseOptions(t.$regularExpression.options));throw new _(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(t)}`)}inspect(t,n,o){const r=Us(n)??(a=>a);o??=q;const i=r(o(this.pattern),"regexp"),s=r(o(this.options),"regexp");return`new BSONRegExp(${i}, ${s})`}}class dt extends Q{get _bsontype(){return"BSONSymbol"}constructor(t){super(),this.value=t}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(t){return new dt(t.$symbol)}inspect(t,n,o){return o??=q,`new BSONSymbol(${o(this.value,n)})`}}const ga=w;class ae extends ga{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(t){if(t==null)super(0,0,!0);else if(typeof t=="bigint")super(t,!0);else if(w.isLong(t))super(t.low,t.high,!0);else if(typeof t=="object"&&"t"in t&&"i"in t){if(typeof t.t!="number"&&(typeof t.t!="object"||t.t._bsontype!=="Int32"))throw new _("Timestamp constructed from { t, i } must provide t as a number");if(typeof t.i!="number"&&(typeof t.i!="object"||t.i._bsontype!=="Int32"))throw new _("Timestamp constructed from { t, i } must provide i as a number");const n=Number(t.t),o=Number(t.i);if(n<0||Number.isNaN(n))throw new _("Timestamp constructed from { t, i } must provide a positive t");if(o<0||Number.isNaN(o))throw new _("Timestamp constructed from { t, i } must provide a positive i");if(n>4294967295)throw new _("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(o>4294967295)throw new _("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(o,n,!0)}else throw new _("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(t){return new ae(w.fromInt(t,!0))}static fromNumber(t){return new ae(w.fromNumber(t,!0))}static fromBits(t,n){return new ae({i:t,t:n})}static fromString(t,n){return new ae(w.fromString(t,!0,n))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(t){const n=w.isLong(t.$timestamp.i)?t.$timestamp.i.getLowBitsUnsigned():t.$timestamp.i,o=w.isLong(t.$timestamp.t)?t.$timestamp.t.getLowBitsUnsigned():t.$timestamp.t;return new ae({t:o,i:n})}inspect(t,n,o){o??=q;const r=o(this.t,n),i=o(this.i,n);return`new Timestamp({ t: ${r}, i: ${i} })`}}ae.MAX_VALUE=w.MAX_UNSIGNED_VALUE;const ma=w.fromNumber(Kr),Ba=w.fromNumber(Jr);function ui(e,t,n){t=t??{};const o=t&&t.index?t.index:0,r=v.getInt32LE(e,o);if(r<5)throw new _(`bson size must be >= 5, is ${r}`);if(t.allowObjectSmallerThanBufferSize&&e.length<r)throw new _(`buffer length ${e.length} must be >= bson size ${r}`);if(!t.allowObjectSmallerThanBufferSize&&e.length!==r)throw new _(`buffer length ${e.length} must === bson size ${r}`);if(r+o>e.byteLength)throw new _(`(bson size ${r} + options.index ${o} must be <= buffer length ${e.byteLength})`);if(e[o+r-1]!==0)throw new _("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Gt(e,o,t,n)}const ka=/^\$ref$|^\$id$|^\$db$/;function Gt(e,t,n,o=!1){const r=n.fieldsAsRaw==null?null:n.fieldsAsRaw,i=n.raw==null?!1:n.raw,s=typeof n.bsonRegExp=="boolean"?n.bsonRegExp:!1,a=n.promoteBuffers??!1,l=n.promoteLongs??!0,c=n.promoteValues??!0,f=n.useBigInt64??!1;if(f&&!c)throw new _("Must either request bigint or Long for int64 deserialization");if(f&&!l)throw new _("Must either request bigint or Long for int64 deserialization");const d=n.validation==null?{utf8:!0}:n.validation;let u=!0,h,m;const S=d.utf8;if(typeof S=="boolean")h=S;else{u=!1;const p=Object.keys(S).map(function(T){return S[T]});if(p.length===0)throw new _("UTF-8 validation setting cannot be empty");if(typeof p[0]!="boolean")throw new _("Invalid UTF-8 validation option, must specify boolean values");if(h=p[0],!p.every(T=>T===h))throw new _("Invalid UTF-8 validation option - keys must be all true or all false")}if(!u){m=new Set;for(const p of Object.keys(S))m.add(p)}const P=t;if(e.length<5)throw new _("corrupt bson message < 5 bytes long");const B=v.getInt32LE(e,t);if(t+=4,B<5||B>e.length)throw new _("corrupt bson message");const C=o?[]:{};let N=0,g=o?!1:null;for(;;){const p=e[t++];if(p===0)break;let T=t;for(;e[T]!==0&&T<e.length;)T++;if(T>=e.byteLength)throw new _("Bad BSON Document: illegal CString");const E=o?N++:k.toUTF8(e,t,T,!1);let O=!0;u||m?.has(E)?O=h:O=!h,g!==!1&&E[0]==="$"&&(g=ka.test(E));let x;if(t=T+1,p===Wr){const b=v.getInt32LE(e,t);if(t+=4,b<=0||b>e.length-t||e[t+b-1]!==0)throw new _("bad string length in bson");x=k.toUTF8(e,t,t+b-1,O),t=t+b}else if(p===qr){const b=k.allocateUnsafe(12);for(let y=0;y<12;y++)b[y]=e[t+y];x=new U(b),t=t+12}else if(p===St&&c===!1)x=new Le(v.getInt32LE(e,t)),t+=4;else if(p===St)x=v.getInt32LE(e,t),t+=4;else if(p===wo)x=v.getFloat64LE(e,t),t+=8,c===!1&&(x=new se(x));else if(p===ei){const b=v.getInt32LE(e,t),y=v.getInt32LE(e,t+4);t+=8,x=new Date(new w(b,y).toNumber())}else if(p===Qr){if(e[t]!==0&&e[t]!==1)throw new _("illegal boolean type value");x=e[t++]===1}else if(p===go){const b=t,y=v.getInt32LE(e,t);if(y<=0||y>e.length-t)throw new _("bad embedded document length in bson");if(i)x=e.subarray(t,t+y);else{let A=n;u||(A={...n,validation:{utf8:O}}),x=Gt(e,b,A,!1)}t=t+y}else if(p===Gr){const b=t,y=v.getInt32LE(e,t);let A=n;const F=t+y;if(r&&r[E]&&(A={...n,raw:!0}),u||(A={...A,validation:{utf8:O}}),x=Gt(e,b,A,!0),t=t+y,e[t-1]!==0)throw new _("invalid array terminator byte");if(t!==F)throw new _("corrupted array bson")}else if(p===Ms)x=void 0;else if(p===Bo)x=null;else if(p===_o)if(f)x=v.getBigInt64LE(e,t),t+=8;else{const b=v.getInt32LE(e,t),y=v.getInt32LE(e,t+4);t+=8;const A=new w(b,y);l&&c===!0?x=A.lessThanOrEqual(ma)&&A.greaterThanOrEqual(Ba)?A.toNumber():A:x=A}else if(p===ri){const b=k.allocateUnsafe(16);for(let y=0;y<16;y++)b[y]=e[t+y];t=t+16,x=new X(b)}else if(p===mo){let b=v.getInt32LE(e,t);t+=4;const y=b,A=e[t++];if(b<0)throw new _("Negative binary type element size found");if(b>e.byteLength)throw new _("Binary type size larger than document size");if(A===I.SUBTYPE_BYTE_ARRAY){if(b=v.getInt32LE(e,t),t+=4,b<0)throw new _("Negative binary type element size found for subtype 0x02");if(b>y-4)throw new _("Binary type with subtype 0x02 contains too long binary size");if(b<y-4)throw new _("Binary type with subtype 0x02 contains too short binary size")}a&&c?x=k.toLocalBufferType(e.subarray(t,t+b)):(x=new I(e.subarray(t,t+b),A),A===bo&&Y.isValid(x)&&(x=x.toUUID())),t=t+b}else if(p===tn&&s===!1){for(T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new _("Bad BSON Document: illegal CString");const b=k.toUTF8(e,t,T,!1);for(t=T+1,T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new _("Bad BSON Document: illegal CString");const y=k.toUTF8(e,t,T,!1);t=T+1;const A=new Array(y.length);for(T=0;T<y.length;T++)switch(y[T]){case"m":A[T]="m";break;case"s":A[T]="g";break;case"i":A[T]="i";break}x=new RegExp(b,A.join(""))}else if(p===tn&&s===!0){for(T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new _("Bad BSON Document: illegal CString");const b=k.toUTF8(e,t,T,!1);for(t=T+1,T=t;e[T]!==0&&T<e.length;)T++;if(T>=e.length)throw new _("Bad BSON Document: illegal CString");const y=k.toUTF8(e,t,T,!1);t=T+1,x=new le(b,y)}else if(p===ti){const b=v.getInt32LE(e,t);if(t+=4,b<=0||b>e.length-t||e[t+b-1]!==0)throw new _("bad string length in bson");const y=k.toUTF8(e,t,t+b-1,O);x=c?y:new dt(y),t=t+b}else if(p===oi)x=new ae({i:v.getUint32LE(e,t),t:v.getUint32LE(e,t+4)}),t+=8;else if(p===ii)x=new ft;else if(p===si)x=new ct;else if(p===ko){const b=v.getInt32LE(e,t);if(t+=4,b<=0||b>e.length-t||e[t+b-1]!==0)throw new _("bad string length in bson");const y=k.toUTF8(e,t,t+b-1,O);x=new ze(y),t=t+b}else if(p===ni){const b=v.getInt32LE(e,t);if(t+=4,b<13)throw new _("code_w_scope total size shorter minimum expected length");const y=v.getInt32LE(e,t);if(t+=4,y<=0||y>e.length-t||e[t+y-1]!==0)throw new _("bad string length in bson");const A=k.toUTF8(e,t,t+y-1,O);t=t+y;const F=t,z=v.getInt32LE(e,t),D=Gt(e,F,n,!1);if(t=t+z,b<8+z+y)throw new _("code_w_scope total size is too short, truncating scope");if(b>8+z+y)throw new _("code_w_scope total size is too long, clips outer document");x=new ze(A,D)}else if(p===Fs){const b=v.getInt32LE(e,t);if(t+=4,b<=0||b>e.length-t||e[t+b-1]!==0)throw new _("bad string length in bson");const y=k.toUTF8(e,t,t+b-1,O);t=t+b;const A=k.allocateUnsafe(12);for(let z=0;z<12;z++)A[z]=e[t+z];const F=new U(A);t=t+12,x=new Ee(y,F)}else throw new _(`Detected unknown BSON type ${p.toString(16)} for fieldname "${E}"`);E==="__proto__"?Object.defineProperty(C,E,{value:x,writable:!0,enumerable:!0,configurable:!0}):C[E]=x}if(B!==t-P)throw o?new _("corrupt array bson"):new _("corrupt object bson");if(!g)return C;if(ci(C)){const p=Object.assign({},C);return delete p.$ref,delete p.$id,delete p.$db,new Ee(C.$ref,C.$id,C.$db,p)}return C}const nn=/\x00/,Qo=new Set(["$db","$ref","$id","$clusterTime"]);function mn(e,t,n,o){e[o++]=Wr;const r=k.encodeUTF8Into(e,t,o);o=o+r+1,e[o-1]=0;const i=k.encodeUTF8Into(e,n,o+4);return v.setInt32LE(e,o,i+1),o=o+4+i,e[o++]=0,o}function Bn(e,t,n,o){const i=!Object.is(n,-0)&&Number.isSafeInteger(n)&&n<=zt&&n>=Lt?St:wo;e[o++]=i;const s=k.encodeUTF8Into(e,t,o);return o=o+s,e[o++]=0,i===St?o+=v.setInt32LE(e,o,n):o+=v.setFloat64LE(e,o,n),o}function kn(e,t,n,o){e[o++]=_o;const r=k.encodeUTF8Into(e,t,o);return o+=r,e[o++]=0,o+=v.setBigInt64LE(e,o,n),o}function Je(e,t,n,o){e[o++]=Bo;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,o}function _n(e,t,n,o){e[o++]=Qr;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,e[o++]=n?1:0,o}function bn(e,t,n,o){e[o++]=ei;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=w.fromNumber(n.getTime()),s=i.getLowBits(),a=i.getHighBits();return o+=v.setInt32LE(e,o,s),o+=v.setInt32LE(e,o,a),o}function yn(e,t,n,o){e[o++]=tn;const r=k.encodeUTF8Into(e,t,o);if(o=o+r,e[o++]=0,n.source&&n.source.match(nn)!=null)throw new _("value "+n.source+" must not contain null bytes");return o=o+k.encodeUTF8Into(e,n.source,o),e[o++]=0,n.ignoreCase&&(e[o++]=105),n.global&&(e[o++]=115),n.multiline&&(e[o++]=109),e[o++]=0,o}function pn(e,t,n,o){e[o++]=tn;const r=k.encodeUTF8Into(e,t,o);if(o=o+r,e[o++]=0,n.pattern.match(nn)!=null)throw new _("pattern "+n.pattern+" must not contain null bytes");o=o+k.encodeUTF8Into(e,n.pattern,o),e[o++]=0;const i=n.options.split("").sort().join("");return o=o+k.encodeUTF8Into(e,i,o),e[o++]=0,o}function Cn(e,t,n,o){n===null?e[o++]=Bo:n._bsontype==="MinKey"?e[o++]=ii:e[o++]=si;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,o}function xn(e,t,n,o){e[o++]=qr;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,o+=n.serializeInto(e,o),o}function Sn(e,t,n,o){e[o++]=mo;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=n.length;if(o+=v.setInt32LE(e,o,i),e[o++]=js,i<=16)for(let s=0;s<i;s++)e[o+s]=n[s];else e.set(n,o);return o=o+i,o}function En(e,t,n,o,r,i,s,a,l){if(l.has(n))throw new _("Cannot convert circular structure to BSON");l.add(n),e[o++]=Array.isArray(n)?Gr:go;const c=k.encodeUTF8Into(e,t,o);o=o+c,e[o++]=0;const f=$t(e,n,r,o,i+1,s,a,l);return l.delete(n),f}function Pn(e,t,n,o){e[o++]=ri;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;for(let i=0;i<16;i++)e[o+i]=n.bytes[i];return o+16}function Nn(e,t,n,o){e[o++]=n._bsontype==="Long"?_o:oi;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=n.getLowBits(),s=n.getHighBits();return o+=v.setInt32LE(e,o,i),o+=v.setInt32LE(e,o,s),o}function Tn(e,t,n,o){n=n.valueOf(),e[o++]=St;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,o+=v.setInt32LE(e,o,n),o}function On(e,t,n,o){e[o++]=wo;const r=k.encodeUTF8Into(e,t,o);return o=o+r,e[o++]=0,o+=v.setFloat64LE(e,o,n.value),o}function In(e,t,n,o){e[o++]=ko;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=n.toString(),s=k.encodeUTF8Into(e,i,o+4)+1;return v.setInt32LE(e,o,s),o=o+4+s-1,e[o++]=0,o}function An(e,t,n,o,r=!1,i=0,s=!1,a=!0,l){if(n.scope&&typeof n.scope=="object"){e[o++]=ni;const c=k.encodeUTF8Into(e,t,o);o=o+c,e[o++]=0;let f=o;const d=n.code;o=o+4;const u=k.encodeUTF8Into(e,d,o+4)+1;v.setInt32LE(e,o,u),e[o+4+u-1]=0,o=o+u+4;const h=$t(e,n.scope,r,o,i+1,s,a,l);o=h-1;const m=h-f;f+=v.setInt32LE(e,f,m),e[o++]=0}else{e[o++]=ko;const c=k.encodeUTF8Into(e,t,o);o=o+c,e[o++]=0;const f=n.code.toString(),d=k.encodeUTF8Into(e,f,o+4)+1;v.setInt32LE(e,o,d),o=o+4+d-1,e[o++]=0}return o}function vn(e,t,n,o){e[o++]=mo;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=n.buffer;let s=n.position;if(n.sub_type===I.SUBTYPE_BYTE_ARRAY&&(s=s+4),o+=v.setInt32LE(e,o,s),e[o++]=n.sub_type,n.sub_type===I.SUBTYPE_BYTE_ARRAY&&(s=s-4,o+=v.setInt32LE(e,o,s)),n.sub_type===I.SUBTYPE_VECTOR&&Be(n),s<=16)for(let a=0;a<s;a++)e[o+a]=i[a];else e.set(i,o);return o=o+n.position,o}function Rn(e,t,n,o){e[o++]=ti;const r=k.encodeUTF8Into(e,t,o);o=o+r,e[o++]=0;const i=k.encodeUTF8Into(e,n.value,o+4)+1;return v.setInt32LE(e,o,i),o=o+4+i-1,e[o++]=0,o}function zn(e,t,n,o,r,i,s){e[o++]=go;const a=k.encodeUTF8Into(e,t,o);o=o+a,e[o++]=0;let l=o,c={$ref:n.collection||n.namespace,$id:n.oid};n.db!=null&&(c.$db=n.db),c=Object.assign(c,n.fields);const f=$t(e,c,!1,o,r+1,i,!0,s),d=f-l;return l+=v.setInt32LE(e,o,d),f}function $t(e,t,n,o,r,i,s,a){if(a==null){if(t==null)return e[0]=5,e[1]=0,e[2]=0,e[3]=0,e[4]=0,5;if(Array.isArray(t))throw new _("serialize does not support an array as the root input");if(typeof t!="object")throw new _("serialize does not support non-object as the root input");if("_bsontype"in t&&typeof t._bsontype=="string")throw new _("BSON types cannot be serialized as a document");if(tt(t)||et(t)||Qe(t)||uo(t))throw new _("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(t);let l=o+4;if(Array.isArray(t))for(let f=0;f<t.length;f++){const d=`${f}`;let u=t[f];typeof u?.toBSON=="function"&&(u=u.toBSON());const h=typeof u;if(u===void 0)l=Je(e,d,u,l);else if(u===null)l=Je(e,d,u,l);else if(h==="string")l=mn(e,d,u,l);else if(h==="number")l=Bn(e,d,u,l);else if(h==="bigint")l=kn(e,d,u,l);else if(h==="boolean")l=_n(e,d,u,l);else if(h==="object"&&u._bsontype==null)u instanceof Date||tt(u)?l=bn(e,d,u,l):u instanceof Uint8Array||Qe(u)?l=Sn(e,d,u,l):u instanceof RegExp||et(u)?l=yn(e,d,u,l):l=En(e,d,u,l,n,r,i,s,a);else if(h==="object"){if(u[rt]!==je)throw new it;if(u._bsontype==="ObjectId")l=xn(e,d,u,l);else if(u._bsontype==="Decimal128")l=Pn(e,d,u,l);else if(u._bsontype==="Long"||u._bsontype==="Timestamp")l=Nn(e,d,u,l);else if(u._bsontype==="Double")l=On(e,d,u,l);else if(u._bsontype==="Code")l=An(e,d,u,l,n,r,i,s,a);else if(u._bsontype==="Binary")l=vn(e,d,u,l);else if(u._bsontype==="BSONSymbol")l=Rn(e,d,u,l);else if(u._bsontype==="DBRef")l=zn(e,d,u,l,r,i,a);else if(u._bsontype==="BSONRegExp")l=pn(e,d,u,l);else if(u._bsontype==="Int32")l=Tn(e,d,u,l);else if(u._bsontype==="MinKey"||u._bsontype==="MaxKey")l=Cn(e,d,u,l);else if(typeof u._bsontype<"u")throw new _(`Unrecognized or invalid _bsontype: ${String(u._bsontype)}`)}else h==="function"&&i&&(l=In(e,d,u,l))}else if(t instanceof Map||ho(t)){const f=t.entries();let d=!1;for(;!d;){const u=f.next();if(d=!!u.done,d)continue;const h=u.value?u.value[0]:void 0;let m=u.value?u.value[1]:void 0;typeof m?.toBSON=="function"&&(m=m.toBSON());const S=typeof m;if(typeof h=="string"&&!Qo.has(h)){if(h.match(nn)!=null)throw new _("key "+h+" must not contain null bytes");if(n){if(h[0]==="$")throw new _("key "+h+" must not start with '$'");if(h.includes("."))throw new _("key "+h+" must not contain '.'")}}if(m===void 0)s===!1&&(l=Je(e,h,m,l));else if(m===null)l=Je(e,h,m,l);else if(S==="string")l=mn(e,h,m,l);else if(S==="number")l=Bn(e,h,m,l);else if(S==="bigint")l=kn(e,h,m,l);else if(S==="boolean")l=_n(e,h,m,l);else if(S==="object"&&m._bsontype==null)m instanceof Date||tt(m)?l=bn(e,h,m,l):m instanceof Uint8Array||Qe(m)?l=Sn(e,h,m,l):m instanceof RegExp||et(m)?l=yn(e,h,m,l):l=En(e,h,m,l,n,r,i,s,a);else if(S==="object"){if(m[rt]!==je)throw new it;if(m._bsontype==="ObjectId")l=xn(e,h,m,l);else if(m._bsontype==="Decimal128")l=Pn(e,h,m,l);else if(m._bsontype==="Long"||m._bsontype==="Timestamp")l=Nn(e,h,m,l);else if(m._bsontype==="Double")l=On(e,h,m,l);else if(m._bsontype==="Code")l=An(e,h,m,l,n,r,i,s,a);else if(m._bsontype==="Binary")l=vn(e,h,m,l);else if(m._bsontype==="BSONSymbol")l=Rn(e,h,m,l);else if(m._bsontype==="DBRef")l=zn(e,h,m,l,r,i,a);else if(m._bsontype==="BSONRegExp")l=pn(e,h,m,l);else if(m._bsontype==="Int32")l=Tn(e,h,m,l);else if(m._bsontype==="MinKey"||m._bsontype==="MaxKey")l=Cn(e,h,m,l);else if(typeof m._bsontype<"u")throw new _(`Unrecognized or invalid _bsontype: ${String(m._bsontype)}`)}else S==="function"&&i&&(l=In(e,h,m,l))}}else{if(typeof t?.toBSON=="function"&&(t=t.toBSON(),t!=null&&typeof t!="object"))throw new _("toBSON function did not return an object");for(const f of Object.keys(t)){let d=t[f];typeof d?.toBSON=="function"&&(d=d.toBSON());const u=typeof d;if(typeof f=="string"&&!Qo.has(f)){if(f.match(nn)!=null)throw new _("key "+f+" must not contain null bytes");if(n){if(f[0]==="$")throw new _("key "+f+" must not start with '$'");if(f.includes("."))throw new _("key "+f+" must not contain '.'")}}if(d===void 0)s===!1&&(l=Je(e,f,d,l));else if(d===null)l=Je(e,f,d,l);else if(u==="string")l=mn(e,f,d,l);else if(u==="number")l=Bn(e,f,d,l);else if(u==="bigint")l=kn(e,f,d,l);else if(u==="boolean")l=_n(e,f,d,l);else if(u==="object"&&d._bsontype==null)d instanceof Date||tt(d)?l=bn(e,f,d,l):d instanceof Uint8Array||Qe(d)?l=Sn(e,f,d,l):d instanceof RegExp||et(d)?l=yn(e,f,d,l):l=En(e,f,d,l,n,r,i,s,a);else if(u==="object"){if(d[rt]!==je)throw new it;if(d._bsontype==="ObjectId")l=xn(e,f,d,l);else if(d._bsontype==="Decimal128")l=Pn(e,f,d,l);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")l=Nn(e,f,d,l);else if(d._bsontype==="Double")l=On(e,f,d,l);else if(d._bsontype==="Code")l=An(e,f,d,l,n,r,i,s,a);else if(d._bsontype==="Binary")l=vn(e,f,d,l);else if(d._bsontype==="BSONSymbol")l=Rn(e,f,d,l);else if(d._bsontype==="DBRef")l=zn(e,f,d,l,r,i,a);else if(d._bsontype==="BSONRegExp")l=pn(e,f,d,l);else if(d._bsontype==="Int32")l=Tn(e,f,d,l);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")l=Cn(e,f,d,l);else if(typeof d._bsontype<"u")throw new _(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else u==="function"&&i&&(l=In(e,f,d,l))}}a.delete(t),e[l++]=0;const c=l-o;return o+=v.setInt32LE(e,o,c),l}function _a(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&typeof e._bsontype=="string"}const ba={$oid:U,$binary:I,$uuid:I,$symbol:dt,$numberInt:Le,$numberDecimal:X,$numberDouble:se,$numberLong:w,$minKey:ft,$maxKey:ct,$regex:le,$regularExpression:le,$timestamp:ae};function hi(e,t={}){if(typeof e=="number"){const o=e<=zt&&e>=Lt,r=e<=Yr&&e>=Xr;if(t.relaxed||t.legacy)return e;if(Number.isInteger(e)&&!Object.is(e,-0)){if(o)return new Le(e);if(r)return t.useBigInt64?BigInt(e):w.fromNumber(e)}return new se(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;const n=Object.keys(e).filter(o=>o.startsWith("$")&&e[o]!=null);for(let o=0;o<n.length;o++){const r=ba[n[o]];if(r)return r.fromExtendedJSON(e,t)}if(e.$date!=null){const o=e.$date,r=new Date;if(t.legacy)if(typeof o=="number")r.setTime(o);else if(typeof o=="string")r.setTime(Date.parse(o));else if(typeof o=="bigint")r.setTime(Number(o));else throw new eo(`Unrecognized type for EJSON date: ${typeof o}`);else if(typeof o=="string")r.setTime(Date.parse(o));else if(w.isLong(o))r.setTime(o.toNumber());else if(typeof o=="number"&&t.relaxed)r.setTime(o);else if(typeof o=="bigint")r.setTime(Number(o));else throw new eo(`Unrecognized type for EJSON date: ${typeof o}`);return r}if(e.$code!=null){const o=Object.assign({},e);return e.$scope&&(o.$scope=hi(e.$scope)),ze.fromExtendedJSON(e)}if(ci(e)||e.$dbPointer){const o=e.$ref?e:e.$dbPointer;if(o instanceof Ee)return o;const r=Object.keys(o).filter(s=>s.startsWith("$"));let i=!0;if(r.forEach(s=>{["$ref","$id","$db"].indexOf(s)===-1&&(i=!1)}),i)return Ee.fromExtendedJSON(o)}return e}function ya(e,t){return e.map((n,o)=>{t.seenObjects.push({propertyName:`index ${o}`,obj:null});try{return ye(n,t)}finally{t.seenObjects.pop()}})}function er(e){const t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}function ye(e,t){if(e instanceof Map||ho(e)){const n=Object.create(null);for(const[o,r]of e){if(typeof o!="string")throw new _("Can only serialize maps with string keys");n[o]=r}return ye(n,t)}if((typeof e=="object"||typeof e=="function")&&e!==null){const n=t.seenObjects.findIndex(o=>o.obj===e);if(n!==-1){const o=t.seenObjects.map(f=>f.propertyName),r=o.slice(0,n).map(f=>`${f} -> `).join(""),i=o[n],s=" -> "+o.slice(n+1,o.length-1).map(f=>`${f} -> `).join(""),a=o[o.length-1],l=" ".repeat(r.length+i.length/2),c="-".repeat(s.length+(i.length+a.length)/2-1);throw new _(`Converting circular structure to EJSON:
    ${r}${i}${s}${a}
    ${l}\\${c}/`)}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return ya(e,t);if(e===void 0)return null;if(e instanceof Date||tt(e)){const n=e.getTime(),o=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&o?{$date:e.getTime()}:{$date:er(e)}:t.relaxed&&o?{$date:er(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Number.isInteger(e)&&!Object.is(e,-0)){if(e>=Lt&&e<=zt)return{$numberInt:e.toString()};if(e>=Xr&&e<=Yr)return{$numberLong:e.toString()}}return{$numberDouble:Object.is(e,-0)?"-0.0":e.toString()}}if(typeof e=="bigint")return t.relaxed?Number(BigInt.asIntN(64,e)):{$numberLong:BigInt.asIntN(64,e).toString()};if(e instanceof RegExp||et(e)){let n=e.flags;if(n===void 0){const r=e.toString().match(/[gimuy]*$/);r&&(n=r[0])}return new le(e.source,n).toExtendedJSON(t)}return e!=null&&typeof e=="object"?Ca(e,t):e}const pa={Binary:e=>new I(e.value(),e.sub_type),Code:e=>new ze(e.code,e.scope),DBRef:e=>new Ee(e.collection||e.namespace,e.oid,e.db,e.fields),Decimal128:e=>new X(e.bytes),Double:e=>new se(e.value),Int32:e=>new Le(e.value),Long:e=>w.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_),MaxKey:()=>new ct,MinKey:()=>new ft,ObjectId:e=>new U(e),BSONRegExp:e=>new le(e.pattern,e.options),BSONSymbol:e=>new dt(e.value),Timestamp:e=>ae.fromBits(e.low,e.high)};function Ca(e,t){if(e==null||typeof e!="object")throw new _("not an object instance");const n=e._bsontype;if(typeof n>"u"){const o={};for(const r of Object.keys(e)){t.seenObjects.push({propertyName:r,obj:null});try{const i=ye(e[r],t);r==="__proto__"?Object.defineProperty(o,r,{value:i,writable:!0,enumerable:!0,configurable:!0}):o[r]=i}finally{t.seenObjects.pop()}}return o}else{if(e!=null&&typeof e=="object"&&typeof e._bsontype=="string"&&e[rt]!==je)throw new it;if(_a(e)){let o=e;if(typeof o.toExtendedJSON!="function"){const r=pa[e._bsontype];if(!r)throw new _("Unrecognized or invalid _bsontype: "+e._bsontype);o=r(o)}return n==="Code"&&o.scope?o=new ze(o.code,ye(o.scope,t)):n==="DBRef"&&o.oid&&(o=new Ee(ye(o.collection,t),ye(o.oid,t),ye(o.db,t),ye(o.fields,t))),o.toExtendedJSON(t)}else throw new _("_bsontype must be a string, but was: "+typeof n)}}function wi(e,t){const n={useBigInt64:t?.useBigInt64??!1,relaxed:t?.relaxed??!0,legacy:t?.legacy??!1};return JSON.parse(e,(o,r)=>{if(o.indexOf("\0")!==-1)throw new _(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(o)}`);return hi(r,n)})}function gi(e,t,n,o){n!=null&&typeof n=="object"&&(o=n,n=0),t!=null&&typeof t=="object"&&!Array.isArray(t)&&(o=t,t=void 0,n=0);const r=Object.assign({relaxed:!0,legacy:!1},o,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=ye(e,r);return JSON.stringify(i,t,n)}function xa(e,t){return t=t||{},JSON.parse(gi(e,t))}function Sa(e,t){return t=t||{},wi(JSON.stringify(e),t)}const ut=Object.create(null);ut.parse=wi;ut.stringify=gi;ut.serialize=xa;ut.deserialize=Sa;Object.freeze(ut);const j={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function Ln(e,t){try{return v.getNonnegativeInt32LE(e,t)}catch(n){throw new be("BSON size cannot be negative",t,{cause:n})}}function $n(e,t){let n=t;for(;e[n]!==0;n++);if(n===e.length-1)throw new be("Null terminator not found",t);return n}function Ea(e,t=0){if(t??=0,e.length<5)throw new be(`Input must be at least 5 bytes, got ${e.length} bytes`,t);const n=Ln(e,t);if(n>e.length-t)throw new be(`Parsed documentSize (${n} bytes) does not match input length (${e.length} bytes)`,t);if(e[t+n-1]!==0)throw new be("BSON documents must end in 0x00",t+n);const o=[];let r=t+4;for(;r<=n+t;){const i=e[r];if(r+=1,i===0){if(r-t!==n)throw new be("Invalid 0x00 type byte",r);break}const s=r,a=$n(e,r)-s;r+=a+1;let l;if(i===j.double||i===j.long||i===j.date||i===j.timestamp)l=8;else if(i===j.int)l=4;else if(i===j.objectId)l=12;else if(i===j.decimal)l=16;else if(i===j.bool)l=1;else if(i===j.null||i===j.undefined||i===j.maxKey||i===j.minKey)l=0;else if(i===j.regex)l=$n(e,$n(e,r)+1)+1-r;else if(i===j.object||i===j.array||i===j.javascriptWithScope)l=Ln(e,r);else if(i===j.string||i===j.binData||i===j.dbPointer||i===j.javascript||i===j.symbol)l=Ln(e,r)+4,i===j.binData&&(l+=1),i===j.dbPointer&&(l+=12);else throw new be(`Invalid 0x${i.toString(16).padStart(2,"0")} type byte`,r);if(l>n)throw new be("value reports length larger than document",r);o.push([i,s,a,r,l]),r+=l}return o}const Dt=Object.create(null);Dt.parseToElements=Ea;Dt.ByteUtils=k;Dt.NumberUtils=v;Object.freeze(Dt);const mi=1024*1024*17;let Oe=k.allocate(mi);function Pa(e){Oe.length<e&&(Oe=k.allocate(e))}function Na(e,t={}){const n=typeof t.checkKeys=="boolean"?t.checkKeys:!1,o=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,r=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0,i=typeof t.minInternalBufferSize=="number"?t.minInternalBufferSize:mi;Oe.length<i&&(Oe=k.allocate(i));const s=$t(Oe,e,n,0,0,o,r,null),a=k.allocateUnsafe(s);return a.set(Oe.subarray(0,s),0),a}function Ta(e,t,n={}){const o=typeof n.checkKeys=="boolean"?n.checkKeys:!1,r=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,i=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!0,s=typeof n.index=="number"?n.index:0,a=$t(Oe,e,o,0,0,r,i,null);return t.set(Oe.subarray(0,a),s),s+a-1}function Oa(e,t={}){return ui(k.toLocalBufferType(e),t)}function Ia(e,t={}){t=t||{};const n=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,o=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0;return Wt(e,n,o)}function Aa(e,t,n,o,r,i){const s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),a=k.toLocalBufferType(e);let l=t;for(let c=0;c<n;c++){const f=v.getInt32LE(a,l);s.index=l,o[r+c]=ui(a,s),l=l+f}return l}var on=Object.freeze({__proto__:null,BSONError:_,BSONOffsetError:be,BSONRegExp:le,BSONRuntimeError:eo,BSONSymbol:dt,BSONType:Zs,BSONValue:Q,BSONVersionError:it,Binary:I,Code:ze,DBRef:Ee,Decimal128:X,Double:se,EJSON:ut,Int32:Le,Long:w,MaxKey:ct,MinKey:ft,ObjectId:U,Timestamp:ae,UUID:Y,calculateObjectSize:Ia,deserialize:Oa,deserializeStream:Aa,onDemand:Dt,serialize:Na,serializeWithBufferAndIndex:Ta,setInternalBufferSize:Pa});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const va=4,tr=0,nr=1,Ra=2;function ht(e){let t=e.length;for(;--t>=0;)e[t]=0}const za=0,Bi=1,La=2,$a=3,Da=258,yo=29,Ut=256,Pt=Ut+1+yo,st=30,po=19,ki=2*Pt+1,Ue=15,Dn=16,Ua=7,Co=256,_i=16,bi=17,yi=18,to=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),qt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fa=512,pe=new Array((Pt+2)*2);ht(pe);const pt=new Array(st*2);ht(pt);const Nt=new Array(Fa);ht(Nt);const Tt=new Array(Da-$a+1);ht(Tt);const xo=new Array(yo);ht(xo);const rn=new Array(st);ht(rn);function Un(e,t,n,o,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=o,this.max_length=r,this.has_stree=e&&e.length}let Ci,xi,Si;function Mn(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Ei=e=>e<256?Nt[e]:Nt[256+(e>>>7)],Ot=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},J=(e,t,n)=>{e.bi_valid>Dn-n?(e.bi_buf|=t<<e.bi_valid&65535,Ot(e,e.bi_buf),e.bi_buf=t>>Dn-e.bi_valid,e.bi_valid+=n-Dn):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ue=(e,t,n)=>{J(e,n[t*2],n[t*2+1])},Pi=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},ja=e=>{e.bi_valid===16?(Ot(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Za=(e,t)=>{const n=t.dyn_tree,o=t.max_code,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,f,d,u,h,m,S=0;for(u=0;u<=Ue;u++)e.bl_count[u]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<ki;c++)f=e.heap[c],u=n[n[f*2+1]*2+1]+1,u>l&&(u=l,S++),n[f*2+1]=u,!(f>o)&&(e.bl_count[u]++,h=0,f>=a&&(h=s[f-a]),m=n[f*2],e.opt_len+=m*(u+h),i&&(e.static_len+=m*(r[f*2+1]+h)));if(S!==0){do{for(u=l-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,S-=2}while(S>0);for(u=l;u!==0;u--)for(f=e.bl_count[u];f!==0;)d=e.heap[--c],!(d>o)&&(n[d*2+1]!==u&&(e.opt_len+=(u-n[d*2+1])*n[d*2],n[d*2+1]=u),f--)}},Ni=(e,t,n)=>{const o=new Array(Ue+1);let r=0,i,s;for(i=1;i<=Ue;i++)r=r+n[i-1]<<1,o[i]=r;for(s=0;s<=t;s++){let a=e[s*2+1];a!==0&&(e[s*2]=Pi(o[a]++,a))}},Ha=()=>{let e,t,n,o,r;const i=new Array(Ue+1);for(n=0,o=0;o<yo-1;o++)for(xo[o]=n,e=0;e<1<<to[o];e++)Tt[n++]=o;for(Tt[n-1]=o,r=0,o=0;o<16;o++)for(rn[o]=r,e=0;e<1<<qt[o];e++)Nt[r++]=o;for(r>>=7;o<st;o++)for(rn[o]=r<<7,e=0;e<1<<qt[o]-7;e++)Nt[256+r++]=o;for(t=0;t<=Ue;t++)i[t]=0;for(e=0;e<=143;)pe[e*2+1]=8,e++,i[8]++;for(;e<=255;)pe[e*2+1]=9,e++,i[9]++;for(;e<=279;)pe[e*2+1]=7,e++,i[7]++;for(;e<=287;)pe[e*2+1]=8,e++,i[8]++;for(Ni(pe,Pt+1,i),e=0;e<st;e++)pt[e*2+1]=5,pt[e*2]=Pi(e,5);Ci=new Un(pe,to,Ut+1,Pt,Ue),xi=new Un(pt,qt,0,st,Ue),Si=new Un(new Array(0),Ma,0,po,Ua)},Ti=e=>{let t;for(t=0;t<Pt;t++)e.dyn_ltree[t*2]=0;for(t=0;t<st;t++)e.dyn_dtree[t*2]=0;for(t=0;t<po;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Co*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Oi=e=>{e.bi_valid>8?Ot(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},or=(e,t,n,o)=>{const r=t*2,i=n*2;return e[r]<e[i]||e[r]===e[i]&&o[t]<=o[n]},Fn=(e,t,n)=>{const o=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&or(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!or(t,o,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=o},rr=(e,t,n)=>{let o,r,i=0,s,a;if(e.sym_next!==0)do o=e.pending_buf[e.sym_buf+i++]&255,o+=(e.pending_buf[e.sym_buf+i++]&255)<<8,r=e.pending_buf[e.sym_buf+i++],o===0?ue(e,r,t):(s=Tt[r],ue(e,s+Ut+1,t),a=to[s],a!==0&&(r-=xo[s],J(e,r,a)),o--,s=Ei(o),ue(e,s,n),a=qt[s],a!==0&&(o-=rn[s],J(e,o,a)));while(i<e.sym_next);ue(e,Co,t)},no=(e,t)=>{const n=t.dyn_tree,o=t.stat_desc.static_tree,r=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,a,l=-1,c;for(e.heap_len=0,e.heap_max=ki,s=0;s<i;s++)n[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=o[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)Fn(e,n,s);c=i;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Fn(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[c*2]=n[s*2]+n[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[s*2+1]=n[a*2+1]=c,e.heap[1]=c++,Fn(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Za(e,t),Ni(n,l,e.bl_count)},ir=(e,t,n)=>{let o,r=-1,i,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(n+1)*2+1]=65535,o=0;o<=n;o++)i=s,s=t[(o+1)*2+1],!(++a<l&&i===s)&&(a<c?e.bl_tree[i*2]+=a:i!==0?(i!==r&&e.bl_tree[i*2]++,e.bl_tree[_i*2]++):a<=10?e.bl_tree[bi*2]++:e.bl_tree[yi*2]++,a=0,r=i,s===0?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4))},sr=(e,t,n)=>{let o,r=-1,i,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),o=0;o<=n;o++)if(i=s,s=t[(o+1)*2+1],!(++a<l&&i===s)){if(a<c)do ue(e,i,e.bl_tree);while(--a!==0);else i!==0?(i!==r&&(ue(e,i,e.bl_tree),a--),ue(e,_i,e.bl_tree),J(e,a-3,2)):a<=10?(ue(e,bi,e.bl_tree),J(e,a-3,3)):(ue(e,yi,e.bl_tree),J(e,a-11,7));a=0,r=i,s===0?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4)}},Va=e=>{let t;for(ir(e,e.dyn_ltree,e.l_desc.max_code),ir(e,e.dyn_dtree,e.d_desc.max_code),no(e,e.bl_desc),t=po-1;t>=3&&e.bl_tree[pi[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Ya=(e,t,n,o)=>{let r;for(J(e,t-257,5),J(e,n-1,5),J(e,o-4,4),r=0;r<o;r++)J(e,e.bl_tree[pi[r]*2+1],3);sr(e,e.dyn_ltree,t-1),sr(e,e.dyn_dtree,n-1)},Xa=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return tr;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return nr;for(n=32;n<Ut;n++)if(e.dyn_ltree[n*2]!==0)return nr;return tr};let ar=!1;const Ka=e=>{ar||(Ha(),ar=!0),e.l_desc=new Mn(e.dyn_ltree,Ci),e.d_desc=new Mn(e.dyn_dtree,xi),e.bl_desc=new Mn(e.bl_tree,Si),e.bi_buf=0,e.bi_valid=0,Ti(e)},Ii=(e,t,n,o)=>{J(e,(za<<1)+(o?1:0),3),Oi(e),Ot(e,n),Ot(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Ja=e=>{J(e,Bi<<1,3),ue(e,Co,pe),ja(e)},Wa=(e,t,n,o)=>{let r,i,s=0;e.level>0?(e.strm.data_type===Ra&&(e.strm.data_type=Xa(e)),no(e,e.l_desc),no(e,e.d_desc),s=Va(e),r=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=r&&(r=i)):r=i=n+5,n+4<=r&&t!==-1?Ii(e,t,n,o):e.strategy===va||i===r?(J(e,(Bi<<1)+(o?1:0),3),rr(e,pe,pt)):(J(e,(La<<1)+(o?1:0),3),Ya(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),rr(e,e.dyn_ltree,e.dyn_dtree)),Ti(e),o&&Oi(e)},Ga=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Tt[n]+Ut+1)*2]++,e.dyn_dtree[Ei(t)*2]++),e.sym_next===e.sym_end);var qa=Ka,Qa=Ii,el=Wa,tl=Ga,nl=Ja,ol={_tr_init:qa,_tr_stored_block:Qa,_tr_flush_block:el,_tr_tally:tl,_tr_align:nl};const rl=(e,t,n,o)=>{let r=e&65535|0,i=e>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do r=r+t[o++]|0,i=i+r|0;while(--s);r%=65521,i%=65521}return r|i<<16|0};var It=rl;const il=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var o=0;o<8;o++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},sl=new Uint32Array(il()),al=(e,t,n,o)=>{const r=sl,i=o+n;e^=-1;for(let s=o;s<i;s++)e=e>>>8^r[(e^t[s])&255];return e^-1};var H=al,Ze={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Mt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ll,_tr_stored_block:oo,_tr_flush_block:cl,_tr_tally:Ae,_tr_align:fl}=ol,{Z_NO_FLUSH:ve,Z_PARTIAL_FLUSH:dl,Z_FULL_FLUSH:ul,Z_FINISH:te,Z_BLOCK:lr,Z_OK:V,Z_STREAM_END:cr,Z_STREAM_ERROR:we,Z_DATA_ERROR:hl,Z_BUF_ERROR:jn,Z_DEFAULT_COMPRESSION:wl,Z_FILTERED:gl,Z_HUFFMAN_ONLY:Vt,Z_RLE:ml,Z_FIXED:Bl,Z_DEFAULT_STRATEGY:kl,Z_UNKNOWN:_l,Z_DEFLATED:cn}=Mt,bl=9,yl=15,pl=8,Cl=29,xl=256,ro=xl+1+Cl,Sl=30,El=19,Pl=2*ro+1,Nl=15,R=3,Ie=258,ge=Ie+R+1,Tl=32,at=42,So=57,io=69,so=73,ao=91,lo=103,Me=113,bt=666,K=1,wt=2,He=3,gt=4,Ol=3,Fe=(e,t)=>(e.msg=Ze[t],t),fr=e=>e*2-(e>4?9:0),Pe=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Il=e=>{let t,n,o,r=e.w_size;t=e.hash_size,o=t;do n=e.head[--o],e.head[o]=n>=r?n-r:0;while(--t);t=r,o=t;do n=e.prev[--o],e.prev[o]=n>=r?n-r:0;while(--t)};let Al=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Re=Al;const W=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},G=(e,t)=>{cl(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,W(e.strm)},$=(e,t)=>{e.pending_buf[e.pending++]=t},_t=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},co=(e,t,n,o)=>{let r=e.avail_in;return r>o&&(r=o),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=It(e.adler,t,r,n):e.state.wrap===2&&(e.adler=H(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},Ai=(e,t)=>{let n=e.max_chain_length,o=e.strstart,r,i,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,c=e.window,f=e.w_mask,d=e.prev,u=e.strstart+Ie;let h=c[o+s-1],m=c[o+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+s]!==m||c[r+s-1]!==h||c[r]!==c[o]||c[++r]!==c[o+1])){o+=2,r++;do;while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<u);if(i=Ie-(u-o),o=u-Ie,i>s){if(e.match_start=t,s=i,i>=a)break;h=c[o+s-1],m=c[o+s]}}while((t=d[t&f])>l&&--n!==0);return s<=e.lookahead?s:e.lookahead},lt=e=>{const t=e.w_size;let n,o,r;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ge)&&(e.window.set(e.window.subarray(t,t+t-o),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Il(e),o+=t),e.strm.avail_in===0)break;if(n=co(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=R)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Re(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Re(e,e.ins_h,e.window[r+R-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<R)););}while(e.lookahead<ge&&e.strm.avail_in!==0)},vi=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o,r,i,s=0,a=e.strm.avail_in;do{if(o=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,o>r+e.strm.avail_in&&(o=r+e.strm.avail_in),o>i&&(o=i),o<n&&(o===0&&t!==te||t===ve||o!==r+e.strm.avail_in)))break;s=t===te&&o===r+e.strm.avail_in?1:0,oo(e,0,0,s),e.pending_buf[e.pending-4]=o,e.pending_buf[e.pending-3]=o>>8,e.pending_buf[e.pending-2]=~o,e.pending_buf[e.pending-1]=~o>>8,W(e.strm),r&&(r>o&&(r=o),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,o-=r),o&&(co(e.strm,e.strm.output,e.strm.next_out,o),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o)}while(s===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?gt:t!==ve&&t!==te&&e.strm.avail_in===0&&e.strstart===e.block_start?wt:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(co(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,n=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=n||(r||t===te)&&t!==ve&&e.strm.avail_in===0&&r<=i)&&(o=r>i?i:r,s=t===te&&e.strm.avail_in===0&&o===r?1:0,oo(e,e.block_start,o,s),e.block_start+=o,W(e.strm)),s?He:K)},Zn=(e,t)=>{let n,o;for(;;){if(e.lookahead<ge){if(lt(e),e.lookahead<ge&&t===ve)return K;if(e.lookahead===0)break}if(n=0,e.lookahead>=R&&(e.ins_h=Re(e,e.ins_h,e.window[e.strstart+R-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ge&&(e.match_length=Ai(e,n)),e.match_length>=R)if(o=Ae(e,e.strstart-e.match_start,e.match_length-R),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=R){e.match_length--;do e.strstart++,e.ins_h=Re(e,e.ins_h,e.window[e.strstart+R-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Re(e,e.ins_h,e.window[e.strstart+1]);else o=Ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(G(e,!1),e.strm.avail_out===0))return K}return e.insert=e.strstart<R-1?e.strstart:R-1,t===te?(G(e,!0),e.strm.avail_out===0?He:gt):e.sym_next&&(G(e,!1),e.strm.avail_out===0)?K:wt},We=(e,t)=>{let n,o,r;for(;;){if(e.lookahead<ge){if(lt(e),e.lookahead<ge&&t===ve)return K;if(e.lookahead===0)break}if(n=0,e.lookahead>=R&&(e.ins_h=Re(e,e.ins_h,e.window[e.strstart+R-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=R-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ge&&(e.match_length=Ai(e,n),e.match_length<=5&&(e.strategy===gl||e.match_length===R&&e.strstart-e.match_start>4096)&&(e.match_length=R-1)),e.prev_length>=R&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-R,o=Ae(e,e.strstart-1-e.prev_match,e.prev_length-R),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=Re(e,e.ins_h,e.window[e.strstart+R-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=R-1,e.strstart++,o&&(G(e,!1),e.strm.avail_out===0))return K}else if(e.match_available){if(o=Ae(e,0,e.window[e.strstart-1]),o&&G(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return K}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=Ae(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<R-1?e.strstart:R-1,t===te?(G(e,!0),e.strm.avail_out===0?He:gt):e.sym_next&&(G(e,!1),e.strm.avail_out===0)?K:wt},vl=(e,t)=>{let n,o,r,i;const s=e.window;for(;;){if(e.lookahead<=Ie){if(lt(e),e.lookahead<=Ie&&t===ve)return K;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=R&&e.strstart>0&&(r=e.strstart-1,o=s[r],o===s[++r]&&o===s[++r]&&o===s[++r])){i=e.strstart+Ie;do;while(o===s[++r]&&o===s[++r]&&o===s[++r]&&o===s[++r]&&o===s[++r]&&o===s[++r]&&o===s[++r]&&o===s[++r]&&r<i);e.match_length=Ie-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=R?(n=Ae(e,1,e.match_length-R),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(G(e,!1),e.strm.avail_out===0))return K}return e.insert=0,t===te?(G(e,!0),e.strm.avail_out===0?He:gt):e.sym_next&&(G(e,!1),e.strm.avail_out===0)?K:wt},Rl=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(lt(e),e.lookahead===0)){if(t===ve)return K;break}if(e.match_length=0,n=Ae(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(G(e,!1),e.strm.avail_out===0))return K}return e.insert=0,t===te?(G(e,!0),e.strm.avail_out===0?He:gt):e.sym_next&&(G(e,!1),e.strm.avail_out===0)?K:wt};function fe(e,t,n,o,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=o,this.func=r}const yt=[new fe(0,0,0,0,vi),new fe(4,4,8,4,Zn),new fe(4,5,16,8,Zn),new fe(4,6,32,32,Zn),new fe(4,4,16,16,We),new fe(8,16,32,32,We),new fe(8,16,128,128,We),new fe(8,32,128,256,We),new fe(32,128,258,1024,We),new fe(32,258,258,4096,We)],zl=e=>{e.window_size=2*e.w_size,Pe(e.head),e.max_lazy_match=yt[e.level].max_lazy,e.good_match=yt[e.level].good_length,e.nice_match=yt[e.level].nice_length,e.max_chain_length=yt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=R-1,e.match_available=0,e.ins_h=0};function Ll(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=cn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Pl*2),this.dyn_dtree=new Uint16Array((2*Sl+1)*2),this.bl_tree=new Uint16Array((2*El+1)*2),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Nl+1),this.heap=new Uint16Array(2*ro+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ro+1),Pe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ft=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==at&&t.status!==So&&t.status!==io&&t.status!==so&&t.status!==ao&&t.status!==lo&&t.status!==Me&&t.status!==bt?1:0},Ri=e=>{if(Ft(e))return Fe(e,we);e.total_in=e.total_out=0,e.data_type=_l;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?So:t.wrap?at:Me,e.adler=t.wrap===2?0:1,t.last_flush=-2,ll(t),V},zi=e=>{const t=Ri(e);return t===V&&zl(e.state),t},$l=(e,t)=>Ft(e)||e.state.wrap!==2?we:(e.state.gzhead=t,V),Li=(e,t,n,o,r,i)=>{if(!e)return we;let s=1;if(t===wl&&(t=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),r<1||r>bl||n!==cn||o<8||o>15||t<0||t>9||i<0||i>Bl||o===8&&s!==1)return Fe(e,we);o===8&&(o=9);const a=new Ll;return e.state=a,a.strm=e,a.status=at,a.wrap=s,a.gzhead=null,a.w_bits=o,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+R-1)/R),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=i,a.method=n,zi(e)},Dl=(e,t)=>Li(e,t,cn,yl,pl,kl),Ul=(e,t)=>{if(Ft(e)||t>lr||t<0)return e?Fe(e,we):we;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===bt&&t!==te)return Fe(e,e.avail_out===0?jn:we);const o=n.last_flush;if(n.last_flush=t,n.pending!==0){if(W(e),e.avail_out===0)return n.last_flush=-1,V}else if(e.avail_in===0&&fr(t)<=fr(o)&&t!==te)return Fe(e,jn);if(n.status===bt&&e.avail_in!==0)return Fe(e,jn);if(n.status===at&&n.wrap===0&&(n.status=Me),n.status===at){let r=cn+(n.w_bits-8<<4)<<8,i=-1;if(n.strategy>=Vt||n.level<2?i=0:n.level<6?i=1:n.level===6?i=2:i=3,r|=i<<6,n.strstart!==0&&(r|=Tl),r+=31-r%31,_t(n,r),n.strstart!==0&&(_t(n,e.adler>>>16),_t(n,e.adler&65535)),e.adler=1,n.status=Me,W(e),n.pending!==0)return n.last_flush=-1,V}if(n.status===So){if(e.adler=0,$(n,31),$(n,139),$(n,8),n.gzhead)$(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),$(n,n.gzhead.time&255),$(n,n.gzhead.time>>8&255),$(n,n.gzhead.time>>16&255),$(n,n.gzhead.time>>24&255),$(n,n.level===9?2:n.strategy>=Vt||n.level<2?4:0),$(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&($(n,n.gzhead.extra.length&255),$(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=H(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=io;else if($(n,0),$(n,0),$(n,0),$(n,0),$(n,0),$(n,n.level===9?2:n.strategy>=Vt||n.level<2?4:0),$(n,Ol),n.status=Me,W(e),n.pending!==0)return n.last_flush=-1,V}if(n.status===io){if(n.gzhead.extra){let r=n.pending,i=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex+=a,W(e),n.pending!==0)return n.last_flush=-1,V;r=0,i-=a}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=so}if(n.status===so){if(n.gzhead.name){let r=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r)),W(e),n.pending!==0)return n.last_flush=-1,V;r=0}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,$(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=ao}if(n.status===ao){if(n.gzhead.comment){let r=n.pending,i;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r)),W(e),n.pending!==0)return n.last_flush=-1,V;r=0}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,$(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=H(e.adler,n.pending_buf,n.pending-r,r))}n.status=lo}if(n.status===lo){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(W(e),n.pending!==0))return n.last_flush=-1,V;$(n,e.adler&255),$(n,e.adler>>8&255),e.adler=0}if(n.status=Me,W(e),n.pending!==0)return n.last_flush=-1,V}if(e.avail_in!==0||n.lookahead!==0||t!==ve&&n.status!==bt){let r=n.level===0?vi(n,t):n.strategy===Vt?Rl(n,t):n.strategy===ml?vl(n,t):yt[n.level].func(n,t);if((r===He||r===gt)&&(n.status=bt),r===K||r===He)return e.avail_out===0&&(n.last_flush=-1),V;if(r===wt&&(t===dl?fl(n):t!==lr&&(oo(n,0,0,!1),t===ul&&(Pe(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),W(e),e.avail_out===0))return n.last_flush=-1,V}return t!==te?V:n.wrap<=0?cr:(n.wrap===2?($(n,e.adler&255),$(n,e.adler>>8&255),$(n,e.adler>>16&255),$(n,e.adler>>24&255),$(n,e.total_in&255),$(n,e.total_in>>8&255),$(n,e.total_in>>16&255),$(n,e.total_in>>24&255)):(_t(n,e.adler>>>16),_t(n,e.adler&65535)),W(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?V:cr)},Ml=e=>{if(Ft(e))return we;const t=e.state.status;return e.state=null,t===Me?Fe(e,hl):V},Fl=(e,t)=>{let n=t.length;if(Ft(e))return we;const o=e.state,r=o.wrap;if(r===2||r===1&&o.status!==at||o.lookahead)return we;if(r===1&&(e.adler=It(e.adler,t,n,0)),o.wrap=0,n>=o.w_size){r===0&&(Pe(o.head),o.strstart=0,o.block_start=0,o.insert=0);let l=new Uint8Array(o.w_size);l.set(t.subarray(n-o.w_size,n),0),t=l,n=o.w_size}const i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,lt(o);o.lookahead>=R;){let l=o.strstart,c=o.lookahead-(R-1);do o.ins_h=Re(o,o.ins_h,o.window[l+R-1]),o.prev[l&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=l,l++;while(--c);o.strstart=l,o.lookahead=R-1,lt(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=R-1,o.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,o.wrap=r,V};var jl=Dl,Zl=Li,Hl=zi,Vl=Ri,Yl=$l,Xl=Ul,Kl=Ml,Jl=Fl,Wl="pako deflate (from Nodeca project)",Ct={deflateInit:jl,deflateInit2:Zl,deflateReset:Hl,deflateResetKeep:Vl,deflateSetHeader:Yl,deflate:Xl,deflateEnd:Kl,deflateSetDictionary:Jl,deflateInfo:Wl};const Gl=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ql=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const o in n)Gl(n,o)&&(e[o]=n[o])}}return e},Ql=e=>{let t=0;for(let o=0,r=e.length;o<r;o++)t+=e[o].length;const n=new Uint8Array(t);for(let o=0,r=0,i=e.length;o<i;o++){let s=e[o];n.set(s,r),r+=s.length}return n},fn={assign:ql,flattenChunks:Ql};let $i=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$i=!1}const At=new Uint8Array(256);for(let e=0;e<256;e++)At[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;At[254]=At[254]=1;var ec=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,o,r,i,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(o=e.charCodeAt(r+1),(o&64512)===56320&&(n=65536+(n-55296<<10)+(o-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),i=0,r=0;i<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(o=e.charCodeAt(r+1),(o&64512)===56320&&(n=65536+(n-55296<<10)+(o-56320),r++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t};const tc=(e,t)=>{if(t<65534&&e.subarray&&$i)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n};var nc=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let o,r;const i=new Array(n*2);for(r=0,o=0;o<n;){let s=e[o++];if(s<128){i[r++]=s;continue}let a=At[s];if(a>4){i[r++]=65533,o+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&o<n;)s=s<<6|e[o++]&63,a--;if(a>1){i[r++]=65533;continue}s<65536?i[r++]=s:(s-=65536,i[r++]=55296|s>>10&1023,i[r++]=56320|s&1023)}return tc(i,r)},oc=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+At[e[n]]>t?n:t},vt={string2buf:ec,buf2string:nc,utf8border:oc};function rc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Di=rc;const Ui=Object.prototype.toString,{Z_NO_FLUSH:ic,Z_SYNC_FLUSH:sc,Z_FULL_FLUSH:ac,Z_FINISH:lc,Z_OK:sn,Z_STREAM_END:cc,Z_DEFAULT_COMPRESSION:fc,Z_DEFAULT_STRATEGY:dc,Z_DEFLATED:uc}=Mt;function jt(e){this.options=fn.assign({level:fc,method:uc,chunkSize:16384,windowBits:15,memLevel:8,strategy:dc},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Di,this.strm.avail_out=0;let n=Ct.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==sn)throw new Error(Ze[n]);if(t.header&&Ct.deflateSetHeader(this.strm,t.header),t.dictionary){let o;if(typeof t.dictionary=="string"?o=vt.string2buf(t.dictionary):Ui.call(t.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(t.dictionary):o=t.dictionary,n=Ct.deflateSetDictionary(this.strm,o),n!==sn)throw new Error(Ze[n]);this._dict_set=!0}}jt.prototype.push=function(e,t){const n=this.strm,o=this.options.chunkSize;let r,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?lc:ic,typeof e=="string"?n.input=vt.string2buf(e):Ui.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(o),n.next_out=0,n.avail_out=o),(i===sc||i===ac)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=Ct.deflate(n,i),r===cc)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Ct.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===sn;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};jt.prototype.onData=function(e){this.chunks.push(e)};jt.prototype.onEnd=function(e){e===sn&&(this.result=fn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Eo(e,t){const n=new jt(t);if(n.push(e,!0),n.err)throw n.msg||Ze[n.err];return n.result}function hc(e,t){return t=t||{},t.raw=!0,Eo(e,t)}function wc(e,t){return t=t||{},t.gzip=!0,Eo(e,t)}var gc=jt,mc=Eo,Bc=hc,kc=wc,_c={Deflate:gc,deflate:mc,deflateRaw:Bc,gzip:kc};const Yt=16209,bc=16191;var yc=function(t,n){let o,r,i,s,a,l,c,f,d,u,h,m,S,P,B,C,N,g,p,T,E,O,x,b;const y=t.state;o=t.next_in,x=t.input,r=o+(t.avail_in-5),i=t.next_out,b=t.output,s=i-(n-t.avail_out),a=i+(t.avail_out-257),l=y.dmax,c=y.wsize,f=y.whave,d=y.wnext,u=y.window,h=y.hold,m=y.bits,S=y.lencode,P=y.distcode,B=(1<<y.lenbits)-1,C=(1<<y.distbits)-1;e:do{m<15&&(h+=x[o++]<<m,m+=8,h+=x[o++]<<m,m+=8),N=S[h&B];t:for(;;){if(g=N>>>24,h>>>=g,m-=g,g=N>>>16&255,g===0)b[i++]=N&65535;else if(g&16){p=N&65535,g&=15,g&&(m<g&&(h+=x[o++]<<m,m+=8),p+=h&(1<<g)-1,h>>>=g,m-=g),m<15&&(h+=x[o++]<<m,m+=8,h+=x[o++]<<m,m+=8),N=P[h&C];n:for(;;){if(g=N>>>24,h>>>=g,m-=g,g=N>>>16&255,g&16){if(T=N&65535,g&=15,m<g&&(h+=x[o++]<<m,m+=8,m<g&&(h+=x[o++]<<m,m+=8)),T+=h&(1<<g)-1,T>l){t.msg="invalid distance too far back",y.mode=Yt;break e}if(h>>>=g,m-=g,g=i-s,T>g){if(g=T-g,g>f&&y.sane){t.msg="invalid distance too far back",y.mode=Yt;break e}if(E=0,O=u,d===0){if(E+=c-g,g<p){p-=g;do b[i++]=u[E++];while(--g);E=i-T,O=b}}else if(d<g){if(E+=c+d-g,g-=d,g<p){p-=g;do b[i++]=u[E++];while(--g);if(E=0,d<p){g=d,p-=g;do b[i++]=u[E++];while(--g);E=i-T,O=b}}}else if(E+=d-g,g<p){p-=g;do b[i++]=u[E++];while(--g);E=i-T,O=b}for(;p>2;)b[i++]=O[E++],b[i++]=O[E++],b[i++]=O[E++],p-=3;p&&(b[i++]=O[E++],p>1&&(b[i++]=O[E++]))}else{E=i-T;do b[i++]=b[E++],b[i++]=b[E++],b[i++]=b[E++],p-=3;while(p>2);p&&(b[i++]=b[E++],p>1&&(b[i++]=b[E++]))}}else if(g&64){t.msg="invalid distance code",y.mode=Yt;break e}else{N=P[(N&65535)+(h&(1<<g)-1)];continue n}break}}else if(g&64)if(g&32){y.mode=bc;break e}else{t.msg="invalid literal/length code",y.mode=Yt;break e}else{N=S[(N&65535)+(h&(1<<g)-1)];continue t}break}}while(o<r&&i<a);p=m>>3,o-=p,m-=p<<3,h&=(1<<m)-1,t.next_in=o,t.next_out=i,t.avail_in=o<r?5+(r-o):5-(o-r),t.avail_out=i<a?257+(a-i):257-(i-a),y.hold=h,y.bits=m};const Ge=15,dr=852,ur=592,hr=0,Hn=1,wr=2,pc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Cc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Sc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ec=(e,t,n,o,r,i,s,a)=>{const l=a.bits;let c=0,f=0,d=0,u=0,h=0,m=0,S=0,P=0,B=0,C=0,N,g,p,T,E,O=null,x;const b=new Uint16Array(Ge+1),y=new Uint16Array(Ge+1);let A=null,F,z,D;for(c=0;c<=Ge;c++)b[c]=0;for(f=0;f<o;f++)b[t[n+f]]++;for(h=l,u=Ge;u>=1&&b[u]===0;u--);if(h>u&&(h=u),u===0)return r[i++]=1<<24|64<<16|0,r[i++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<u&&b[d]===0;d++);for(h<d&&(h=d),P=1,c=1;c<=Ge;c++)if(P<<=1,P-=b[c],P<0)return-1;if(P>0&&(e===hr||u!==1))return-1;for(y[1]=0,c=1;c<Ge;c++)y[c+1]=y[c]+b[c];for(f=0;f<o;f++)t[n+f]!==0&&(s[y[t[n+f]]++]=f);if(e===hr?(O=A=s,x=20):e===Hn?(O=pc,A=Cc,x=257):(O=xc,A=Sc,x=0),C=0,f=0,c=d,E=i,m=h,S=0,p=-1,B=1<<h,T=B-1,e===Hn&&B>dr||e===wr&&B>ur)return 1;for(;;){F=c-S,s[f]+1<x?(z=0,D=s[f]):s[f]>=x?(z=A[s[f]-x],D=O[s[f]-x]):(z=96,D=0),N=1<<c-S,g=1<<m,d=g;do g-=N,r[E+(C>>S)+g]=F<<24|z<<16|D|0;while(g!==0);for(N=1<<c-1;C&N;)N>>=1;if(N!==0?(C&=N-1,C+=N):C=0,f++,--b[c]===0){if(c===u)break;c=t[n+s[f]]}if(c>h&&(C&T)!==p){for(S===0&&(S=h),E+=d,m=c-S,P=1<<m;m+S<u&&(P-=b[m+S],!(P<=0));)m++,P<<=1;if(B+=1<<m,e===Hn&&B>dr||e===wr&&B>ur)return 1;p=C&T,r[p]=h<<24|m<<16|E-i|0}}return C!==0&&(r[E+C]=c-S<<24|64<<16|0),a.bits=h,0};var xt=Ec;const Pc=0,Mi=1,Fi=2,{Z_FINISH:gr,Z_BLOCK:Nc,Z_TREES:Xt,Z_OK:Ve,Z_STREAM_END:Tc,Z_NEED_DICT:Oc,Z_STREAM_ERROR:ne,Z_DATA_ERROR:ji,Z_MEM_ERROR:Zi,Z_BUF_ERROR:Ic,Z_DEFLATED:mr}=Mt,dn=16180,Br=16181,kr=16182,_r=16183,br=16184,yr=16185,pr=16186,Cr=16187,xr=16188,Sr=16189,an=16190,me=16191,Vn=16192,Er=16193,Yn=16194,Pr=16195,Nr=16196,Tr=16197,Or=16198,Kt=16199,Jt=16200,Ir=16201,Ar=16202,vr=16203,Rr=16204,zr=16205,Xn=16206,Lr=16207,$r=16208,M=16209,Hi=16210,Vi=16211,Ac=852,vc=592,Rc=15,zc=Rc,Dr=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Lc(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ye=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<dn||t.mode>Vi?1:0},Yi=e=>{if(Ye(e))return ne;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=dn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ac),t.distcode=t.distdyn=new Int32Array(vc),t.sane=1,t.back=-1,Ve},Xi=e=>{if(Ye(e))return ne;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Yi(e)},Ki=(e,t)=>{let n;if(Ye(e))return ne;const o=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ne:(o.window!==null&&o.wbits!==t&&(o.window=null),o.wrap=n,o.wbits=t,Xi(e))},Ji=(e,t)=>{if(!e)return ne;const n=new Lc;e.state=n,n.strm=e,n.window=null,n.mode=dn;const o=Ki(e,t);return o!==Ve&&(e.state=null),o},$c=e=>Ji(e,zc);let Ur=!0,Kn,Jn;const Dc=e=>{if(Ur){Kn=new Int32Array(512),Jn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(xt(Mi,e.lens,0,288,Kn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;xt(Fi,e.lens,0,32,Jn,0,e.work,{bits:5}),Ur=!1}e.lencode=Kn,e.lenbits=9,e.distcode=Jn,e.distbits=5},Wi=(e,t,n,o)=>{let r;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),o>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>o&&(r=o),i.window.set(t.subarray(n-o,n-o+r),i.wnext),o-=r,o?(i.window.set(t.subarray(n-o,n),0),i.wnext=o,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0},Uc=(e,t)=>{let n,o,r,i,s,a,l,c,f,d,u,h,m,S,P=0,B,C,N,g,p,T,E,O;const x=new Uint8Array(4);let b,y;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ye(e)||!e.output||!e.input&&e.avail_in!==0)return ne;n=e.state,n.mode===me&&(n.mode=Vn),s=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,o=e.input,a=e.avail_in,c=n.hold,f=n.bits,d=a,u=l,O=Ve;e:for(;;)switch(n.mode){case dn:if(n.wrap===0){n.mode=Vn;break}for(;f<16;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=H(n.check,x,2,0),c=0,f=0,n.mode=Br;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=M;break}if((c&15)!==mr){e.msg="unknown compression method",n.mode=M;break}if(c>>>=4,f-=4,E=(c&15)+8,n.wbits===0&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=M;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?Sr:me,c=0,f=0;break;case Br:for(;f<16;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(n.flags=c,(n.flags&255)!==mr){e.msg="unknown compression method",n.mode=M;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=M;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=H(n.check,x,2,0)),c=0,f=0,n.mode=kr;case kr:for(;f<32;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=H(n.check,x,4,0)),c=0,f=0,n.mode=_r;case _r:for(;f<16;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=H(n.check,x,2,0)),c=0,f=0,n.mode=br;case br:if(n.flags&1024){for(;f<16;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=H(n.check,x,2,0)),c=0,f=0}else n.head&&(n.head.extra=null);n.mode=yr;case yr:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(o.subarray(i,i+h),E)),n.flags&512&&n.wrap&4&&(n.check=H(n.check,o,h,i)),a-=h,i+=h,n.length-=h),n.length))break e;n.length=0,n.mode=pr;case pr:if(n.flags&2048){if(a===0)break e;h=0;do E=o[i+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=H(n.check,o,h,i)),a-=h,i+=h,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Cr;case Cr:if(n.flags&4096){if(a===0)break e;h=0;do E=o[i+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=H(n.check,o,h,i)),a-=h,i+=h,E)break e}else n.head&&(n.head.comment=null);n.mode=xr;case xr:if(n.flags&512){for(;f<16;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=M;break}c=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=me;break;case Sr:for(;f<32;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}e.adler=n.check=Dr(c),c=0,f=0,n.mode=an;case an:if(n.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=a,n.hold=c,n.bits=f,Oc;e.adler=n.check=1,n.mode=me;case me:if(t===Nc||t===Xt)break e;case Vn:if(n.last){c>>>=f&7,f-=f&7,n.mode=Xn;break}for(;f<3;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}switch(n.last=c&1,c>>>=1,f-=1,c&3){case 0:n.mode=Er;break;case 1:if(Dc(n),n.mode=Kt,t===Xt){c>>>=2,f-=2;break e}break;case 2:n.mode=Nr;break;case 3:e.msg="invalid block type",n.mode=M}c>>>=2,f-=2;break;case Er:for(c>>>=f&7,f-=f&7;f<32;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=M;break}if(n.length=c&65535,c=0,f=0,n.mode=Yn,t===Xt)break e;case Yn:n.mode=Pr;case Pr:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(o.subarray(i,i+h),s),a-=h,i+=h,l-=h,s+=h,n.length-=h;break}n.mode=me;break;case Nr:for(;f<14;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(n.nlen=(c&31)+257,c>>>=5,f-=5,n.ndist=(c&31)+1,c>>>=5,f-=5,n.ncode=(c&15)+4,c>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=M;break}n.have=0,n.mode=Tr;case Tr:for(;n.have<n.ncode;){for(;f<3;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.lens[A[n.have++]]=c&7,c>>>=3,f-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,b={bits:n.lenbits},O=xt(Pc,n.lens,0,19,n.lencode,0,n.work,b),n.lenbits=b.bits,O){e.msg="invalid code lengths set",n.mode=M;break}n.have=0,n.mode=Or;case Or:for(;n.have<n.nlen+n.ndist;){for(;P=n.lencode[c&(1<<n.lenbits)-1],B=P>>>24,C=P>>>16&255,N=P&65535,!(B<=f);){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(N<16)c>>>=B,f-=B,n.lens[n.have++]=N;else{if(N===16){for(y=B+2;f<y;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(c>>>=B,f-=B,n.have===0){e.msg="invalid bit length repeat",n.mode=M;break}E=n.lens[n.have-1],h=3+(c&3),c>>>=2,f-=2}else if(N===17){for(y=B+3;f<y;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}c>>>=B,f-=B,E=0,h=3+(c&7),c>>>=3,f-=3}else{for(y=B+7;f<y;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}c>>>=B,f-=B,E=0,h=11+(c&127),c>>>=7,f-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=M;break}for(;h--;)n.lens[n.have++]=E}}if(n.mode===M)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=M;break}if(n.lenbits=9,b={bits:n.lenbits},O=xt(Mi,n.lens,0,n.nlen,n.lencode,0,n.work,b),n.lenbits=b.bits,O){e.msg="invalid literal/lengths set",n.mode=M;break}if(n.distbits=6,n.distcode=n.distdyn,b={bits:n.distbits},O=xt(Fi,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,b),n.distbits=b.bits,O){e.msg="invalid distances set",n.mode=M;break}if(n.mode=Kt,t===Xt)break e;case Kt:n.mode=Jt;case Jt:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=a,n.hold=c,n.bits=f,yc(e,u),s=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,o=e.input,a=e.avail_in,c=n.hold,f=n.bits,n.mode===me&&(n.back=-1);break}for(n.back=0;P=n.lencode[c&(1<<n.lenbits)-1],B=P>>>24,C=P>>>16&255,N=P&65535,!(B<=f);){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(C&&!(C&240)){for(g=B,p=C,T=N;P=n.lencode[T+((c&(1<<g+p)-1)>>g)],B=P>>>24,C=P>>>16&255,N=P&65535,!(g+B<=f);){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}c>>>=g,f-=g,n.back+=g}if(c>>>=B,f-=B,n.back+=B,n.length=N,C===0){n.mode=zr;break}if(C&32){n.back=-1,n.mode=me;break}if(C&64){e.msg="invalid literal/length code",n.mode=M;break}n.extra=C&15,n.mode=Ir;case Ir:if(n.extra){for(y=n.extra;f<y;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ar;case Ar:for(;P=n.distcode[c&(1<<n.distbits)-1],B=P>>>24,C=P>>>16&255,N=P&65535,!(B<=f);){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(!(C&240)){for(g=B,p=C,T=N;P=n.distcode[T+((c&(1<<g+p)-1)>>g)],B=P>>>24,C=P>>>16&255,N=P&65535,!(g+B<=f);){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}c>>>=g,f-=g,n.back+=g}if(c>>>=B,f-=B,n.back+=B,C&64){e.msg="invalid distance code",n.mode=M;break}n.offset=N,n.extra=C&15,n.mode=vr;case vr:if(n.extra){for(y=n.extra;f<y;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=M;break}n.mode=Rr;case Rr:if(l===0)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=M;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),S=n.window}else S=r,m=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[s++]=S[m++];while(--h);n.length===0&&(n.mode=Jt);break;case zr:if(l===0)break e;r[s++]=n.length,l--,n.mode=Jt;break;case Xn:if(n.wrap){for(;f<32;){if(a===0)break e;a--,c|=o[i++]<<f,f+=8}if(u-=l,e.total_out+=u,n.total+=u,n.wrap&4&&u&&(e.adler=n.check=n.flags?H(n.check,r,u,s-u):It(n.check,r,u,s-u)),u=l,n.wrap&4&&(n.flags?c:Dr(c))!==n.check){e.msg="incorrect data check",n.mode=M;break}c=0,f=0}n.mode=Lr;case Lr:if(n.wrap&&n.flags){for(;f<32;){if(a===0)break e;a--,c+=o[i++]<<f,f+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=M;break}c=0,f=0}n.mode=$r;case $r:O=Tc;break e;case M:O=ji;break e;case Hi:return Zi;case Vi:default:return ne}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=a,n.hold=c,n.bits=f,(n.wsize||u!==e.avail_out&&n.mode<M&&(n.mode<Xn||t!==gr))&&Wi(e,e.output,e.next_out,u-e.avail_out),d-=e.avail_in,u-=e.avail_out,e.total_in+=d,e.total_out+=u,n.total+=u,n.wrap&4&&u&&(e.adler=n.check=n.flags?H(n.check,r,u,e.next_out-u):It(n.check,r,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===me?128:0)+(n.mode===Kt||n.mode===Yn?256:0),(d===0&&u===0||t===gr)&&O===Ve&&(O=Ic),O},Mc=e=>{if(Ye(e))return ne;let t=e.state;return t.window&&(t.window=null),e.state=null,Ve},Fc=(e,t)=>{if(Ye(e))return ne;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Ve):ne},jc=(e,t)=>{const n=t.length;let o,r,i;return Ye(e)||(o=e.state,o.wrap!==0&&o.mode!==an)?ne:o.mode===an&&(r=1,r=It(r,t,n,0),r!==o.check)?ji:(i=Wi(e,t,n,n),i?(o.mode=Hi,Zi):(o.havedict=1,Ve))};var Zc=Xi,Hc=Ki,Vc=Yi,Yc=$c,Xc=Ji,Kc=Uc,Jc=Mc,Wc=Fc,Gc=jc,qc="pako inflate (from Nodeca project)",Ce={inflateReset:Zc,inflateReset2:Hc,inflateResetKeep:Vc,inflateInit:Yc,inflateInit2:Xc,inflate:Kc,inflateEnd:Jc,inflateGetHeader:Wc,inflateSetDictionary:Gc,inflateInfo:qc};function Qc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ef=Qc;const Gi=Object.prototype.toString,{Z_NO_FLUSH:tf,Z_FINISH:nf,Z_OK:Rt,Z_STREAM_END:Wn,Z_NEED_DICT:Gn,Z_STREAM_ERROR:of,Z_DATA_ERROR:Mr,Z_MEM_ERROR:rf}=Mt;function Zt(e){this.options=fn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Di,this.strm.avail_out=0;let n=Ce.inflateInit2(this.strm,t.windowBits);if(n!==Rt)throw new Error(Ze[n]);if(this.header=new ef,Ce.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=vt.string2buf(t.dictionary):Gi.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ce.inflateSetDictionary(this.strm,t.dictionary),n!==Rt)))throw new Error(Ze[n])}Zt.prototype.push=function(e,t){const n=this.strm,o=this.options.chunkSize,r=this.options.dictionary;let i,s,a;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?nf:tf,Gi.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(o),n.next_out=0,n.avail_out=o),i=Ce.inflate(n,s),i===Gn&&r&&(i=Ce.inflateSetDictionary(n,r),i===Rt?i=Ce.inflate(n,s):i===Mr&&(i=Gn));n.avail_in>0&&i===Wn&&n.state.wrap>0&&e[n.next_in]!==0;)Ce.inflateReset(n),i=Ce.inflate(n,s);switch(i){case of:case Mr:case Gn:case rf:return this.onEnd(i),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||i===Wn))if(this.options.to==="string"){let l=vt.utf8border(n.output,n.next_out),c=n.next_out-l,f=vt.buf2string(n.output,l);n.next_out=c,n.avail_out=o-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===Rt&&a===0)){if(i===Wn)return i=Ce.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Zt.prototype.onData=function(e){this.chunks.push(e)};Zt.prototype.onEnd=function(e){e===Rt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Po(e,t){const n=new Zt(t);if(n.push(e),n.err)throw n.msg||Ze[n.err];return n.result}function sf(e,t){return t=t||{},t.raw=!0,Po(e,t)}var af=Zt,lf=Po,cf=sf,ff=Po,df={Inflate:af,inflate:lf,inflateRaw:cf,ungzip:ff};const{Deflate:uf,deflate:hf,deflateRaw:wf,gzip:gf}=_c,{Inflate:mf,inflate:Bf,inflateRaw:kf,ungzip:_f}=df;var bf=uf,yf=hf,pf=wf,Cf=gf,xf=mf,Sf=Bf,Ef=kf,Pf=_f,Nf=Mt,qi={Deflate:bf,deflate:yf,deflateRaw:pf,gzip:Cf,Inflate:xf,inflate:Sf,inflateRaw:Ef,ungzip:Pf,constants:Nf};const No=new Uint8Array([201,65,78,16,206,35,68,235,32,50,197,104,172,225,144,45]),Qi=async e=>{const t=new TextEncoder,n=await crypto.subtle.importKey("raw",t.encode(e),"PBKDF2",!1,["deriveBits","deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:No,iterations:1e5,hash:"SHA-256"},n,{name:"AES-CTR",length:256},!0,["encrypt","decrypt"])},Tf=async e=>{const t=new Date().getTime(),n=on.serialize({...e,time:t}),o=qi.deflate(n),r=`${t}`,i=await Qi(r),s=await crypto.subtle.encrypt({name:"AES-CTR",counter:No,length:64},i,o);return on.serialize({now:t,data:new Uint8Array(s)})},Of=async e=>{const{now:t,data:n}=on.deserialize(e),o=await Qi(`${t}`),r=await crypto.subtle.decrypt({name:"AES-CTR",counter:No,length:64},o,n.buffer),i=qi.inflate(r);return{...on.deserialize(new Uint8Array(i)),timestamp:t}},If=e=>e!==void 0?e==="rainbow"?200:ln.indexOf(e):void 0,Af=e=>e!==void 0?e===200?"rainbow":ln[e]:void 0,vf=e=>ts(e)?ln.indexOf(e):ns(e)?50+Fr.findIndex(t=>t.name===e):os(e)?100+jr.findIndex(t=>t.name===e):200,qn=e=>e<50?ln[e]:e<100?Fr[e-50].name:jr[e-100].name,Rf=e=>({c:e.columns.map(t=>({b:t.blocks.map(n=>({c:vf(n.blockType),r:!!n.revealed})),s:t.columnSize,l:If(t.limitColor),t:{buffer:0,placement:1,inventory:2}[t.type],p:t.paddingTop})),m:es(e.moves),w:e.width,s:zf(e.solver)}),es=e=>e.map(t=>({f:t.from,t:t.to})),zf=e=>e===void 0?void 0:{default:void 0}[e],Lf=e=>{const t=e.c.reduce((n,o)=>o.b.reduce((r,i)=>r.includes(qn(i.c))?r:r.concat(qn(i.c)),n),[]);return t.sort(),{blockTypes:t,columns:e.c.map(n=>({blocks:n.b.map(o=>({blockType:qn(o.c),revealed:o.r})),columnSize:n.s,limitColor:Af(n.l),type:["buffer","placement","inventory"][n.t],locked:n.b.length===n.s&&n.b.every(o=>o.c===n.b[0].c),paddingTop:n.p})),moves:fo(e.m),width:e.w,solver:Uf(e.s)}},fo=e=>e.map(t=>({from:t.f,to:t.t})),$f=e=>e==="standard"?0:e==="eager"?1:2,Df=e=>e===0?"standard":e===1?"eager":"off",Uf=e=>e===void 0?void 0:{0:void 0}[e],Mf=async(e,t,n)=>{const o=n.s?Lf(n.s):null;await Promise.all([ie(`${e}lostCounter`,n.l),ie(`${e}usedAutoMoves`,n.a),ie(`${e}initialLevelState${t}`,o),ie(`${e}moves`,fo(n.m)),ie(`${e}levelState${t}`,o?rs(o,fo(n.m)):null)])},Ff=async e=>{await Promise.all([ie("levelNr",e.l),ie("zenLevelNr",e.z.l),ie("zenDifficulty",e.z.d),ie("zenLevelType",e.z.t),ie("hintMode",Df(e.h)),ie("streak",e.s)]),await Promise.all([Mf("",e.l,e.ld)])},jf=async(e,t)=>{const n=await de(`${e}lostCounter`)??0,o=await de(`${e}usedAutoMoves`)??0,r=await de(`${e}initialLevelState${t}`),i=await de(`${e}moves`)??[];return{l:n,a:o,s:r?Rf(r):null,m:es(i)}},Zf=async()=>{const e=await de("levelNr")??0,t=await de("zenLevelNr")??0,n=await de("zenDifficulty")??0,o=await de("zenLevelType")??0,r=await de("hintMode")??"standard",i=await de("streak")??0;return{l:e,ld:await jf("",e),h:$f(r),s:i,z:{l:t,d:n,t:o},version:Qt}},To=10,Hf=async()=>{const e=await Zf(),t=await Tf(e);return await ls.toDataURL([{data:t,mode:"byte"}],{type:"image/png"})},Vf=async e=>new Promise(t=>{const n=new Image;n.onload=async()=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const r=o.getContext("2d");if(r){r.drawImage(n,0,0);const i=r.getImageData(0,0,n.width,n.height),s=Qn(i.data,n.width,n.height);if(s)try{const a=await Of(new Uint8Array(s.binaryData)),l=(new Date().getTime()-a.timestamp)/6e4;if(a.version!==Qt)return t({success:!1,message:`Version mismatch: ${a.version} vs. ${Qt}`});if(l<0||a.time!==a.timestamp)return t({success:!1,message:"Data is invalid"});if(l>To)return t({success:!1,message:Math.ceil(l)>90?`Data is too old: ${Math.floor(l/60)} hours`:`Data is too old: ${Math.ceil(l)} minutes`});const c=a.l;if(confirm(`You are about to import data
at level ${c+1}. Continue?`))await Ff(a);else return t({success:!1,message:"Import canceled"});return t({success:!0,message:""})}catch{return t({success:!1,message:"Could not unpack data"})}else return t({success:!1,message:"Could not read QR code"})}else return t({success:!1,message:"Could not load image data"})},n.src=URL.createObjectURL(e)}),Jf=()=>{const e=Zr.c(11),[t,n]=mt.useState(null),[o,r]=mt.useState(!1),[i,s]=mt.useState(0),{requestWakeLock:a,releaseWakeLock:l}=is(),[c,f]=mt.useTransition(),[d,u]=mt.useState(null);let h;e[0]!==l?(h=()=>f(async()=>{try{const C=await Hf();u(C)}catch{n("Could not pack data"),l()}}),e[0]=l,e[1]=h):h=e[1];const m=h,S=window.crypto!==void 0&&window.TextEncoder&&window.crypto.subtle;let P;e[2]===Symbol.for("react.memo_cache_sentinel")?(P=Z.jsx("h2",{className:"text-lg font-bold",children:"Transfer game data"}),e[2]=P):P=e[2];let B;return e[3]!==d||e[4]!==i||e[5]!==m||e[6]!==t||e[7]!==o||e[8]!==c||e[9]!==a?(B=Z.jsxs("div",{className:"flex flex-col gap-4",children:[P,S?Z.jsxs(Z.Fragment,{children:[!c&&d===null&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("p",{className:"text-sm",children:["You can transfer your game data to another instance of the game through an image. The export is valid for"," ",Z.jsxs("strong",{children:[To," minutes"]}),", and needs to be imported into the same version (",Qt,") of the game."]}),Z.jsx("p",{className:"text-sm",children:"This is not meant to act as a backup."}),Z.jsx(ss,{onClick:()=>{m(),a()},children:"Export game data"})]}),c&&Z.jsx("p",{children:"Packing data..."}),d&&Z.jsx(Yf,{data:d}),t&&Z.jsx("p",{className:"text-sm font-bold text-red-600",children:t}),o&&Z.jsx("p",{className:"text-sm font-bold text-green-900",children:"Data successfully imported"}),Z.jsxs("label",{htmlFor:"dropzone-file",className:as("inline-block rounded-full border border-black p-2 shadow-md","text-black","transition-transform active:scale-90","px-4 text-center text-sm"),children:[Z.jsx("p",{children:"Import game data"}),Z.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:async C=>{r(!1);const N=C.target.files?.[0];if(N){const{success:g,message:p}=await Vf(N);r(g),n(p)}else n("No file selected");s(Xf)}},i)]})]}):Z.jsx("p",{className:"text-sm font-bold text-red-600",children:"Your browser does not support encryption, data transfer is disabled"})]}),e[3]=d,e[4]=i,e[5]=m,e[6]=t,e[7]=o,e[8]=c,e[9]=a,e[10]=B):B=e[10],B},Yf=e=>{const t=Zr.c(6),{data:n}=e;let o;t[0]!==n?(o=Z.jsx("img",{src:n,width:200,height:200,className:"[-webkit-touch-callout:default]"}),t[0]=n,t[1]=o):o=t[1];let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=Z.jsx("strong",{children:"Long press"}),t[2]=r):r=t[2];let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=Z.jsxs("p",{className:"pt-2 text-sm",children:["This image contains all your game data. ",r," to download it and upload it to your new game instance (on another device or this one). The image will be valid for"," ",Z.jsxs("strong",{children:[To," minutes"]}),"."]}),t[3]=i):i=t[3];let s;return t[4]!==o?(s=Z.jsxs("div",{className:"flex flex-col items-center",children:[o,i]}),t[4]=o,t[5]=s):s=t[5],s};function Xf(e){return(e+1)%5}export{Jf as default};
